(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(t,e,n){"use strict";n.r(e);var r=n(0),a=n.n(r),i=n(35),o=n.n(i),c=n(65),u=n(5),s=n(31),d=n(44),l=n(45),p=n(4),f=n(2),b=n.n(f),h=n(6),x=n(12),g=n(49),w=n.n(g),m=w.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/todo-lists",withCredentials:!0,headers:{"API-KEY":"b4801660-f864-43f9-8acc-579713cc64df"}}),v=w.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/auth",withCredentials:!0,headers:{"API-KEY":"b4801660-f864-43f9-8acc-579713cc64df"}}),k=function(){return v.get("/me").then(function(t){var e;return b.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(200===t.status){n.next=9;break}e=t;case 2:if(200===e.status){n.next=8;break}return n.next=5,b.a.awrap(v.get(""));case 5:e=n.sent,n.next=2;break;case 8:return n.abrupt("return",e.data);case 9:return n.abrupt("return",t.data);case 10:case"end":return n.stop()}})})},O=function(){var t={email:"npikolist@gmail.com",password:"512347",rememberMe:!1};return v.post("/login",t).then(function(e){var n;return b.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(200===e.status){r.next=9;break}n=e;case 2:if(200===n.status){r.next=8;break}return r.next=5,b.a.awrap(v.post("",t));case 5:n=r.sent,r.next=2;break;case 8:return r.abrupt("return",n.data);case 9:return r.abrupt("return",e.data);case 10:case"end":return r.stop()}})})},y=function(){return m.get("").then(function(t){var e;return b.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(200===t.status){n.next=9;break}e=t;case 2:if(200===e.status){n.next=8;break}return n.next=5,b.a.awrap(m.get(""));case 5:e=n.sent,n.next=2;break;case 8:return n.abrupt("return",e.data);case 9:return n.abrupt("return",t.data);case 10:case"end":return n.stop()}})})},j=function(t){return m.post("",{title:t}).then(function(e){var n;return b.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(200===e.status){r.next=9;break}n=e;case 2:if(200===n.status){r.next=8;break}return r.next=5,b.a.awrap(m.post("",{title:t}));case 5:n=r.sent,r.next=2;break;case 8:return r.abrupt("return",n.data);case 9:return r.abrupt("return",e.data);case 10:case"end":return r.stop()}})})},L=function(t){return m.get("/".concat(t,"/tasks")).then(function(e){var n;return b.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(200===e.status){r.next=9;break}n=e;case 2:if(200===n.status){r.next=8;break}return r.next=5,b.a.awrap(m.get("/".concat(t,"/tasks")));case 5:n=r.sent,r.next=2;break;case 8:return r.abrupt("return",n.data);case 9:return r.abrupt("return",e.data);case 10:case"end":return r.stop()}})})},I=function(t,e){return m.post("/".concat(e,"/tasks"),{title:t}).then(function(n){var r;return b.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(200===n.status){a.next=9;break}r=n;case 2:if(200===r.status){a.next=8;break}return a.next=5,b.a.awrap(m.post("/".concat(e,"/tasks"),{title:t}));case 5:r=a.sent,a.next=2;break;case 8:return a.abrupt("return",r.data);case 9:return a.abrupt("return",n.data);case 10:case"end":return a.stop()}})})},E=function(t,e,n){return m.put("/".concat(t,"/tasks/").concat(e),n).then(function(r){var a;return b.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:if(200===r.status){i.next=9;break}a=r;case 2:if(200===a.status){i.next=8;break}return i.next=5,b.a.awrap(m.put("/".concat(t,"/tasks/").concat(e),n));case 5:a=i.sent,i.next=2;break;case 8:return i.abrupt("return",a.data);case 9:return i.abrupt("return",r.data);case 10:case"end":return i.stop()}})})},T=function(t){return m.delete("/".concat(t)).then(function(e){var n;return b.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(200===e.status){r.next=9;break}n=e;case 2:if(200===n.status){r.next=8;break}return r.next=5,b.a.awrap(m.delete("/".concat(t)));case 5:n=r.sent,r.next=2;break;case 8:return r.abrupt("return",n.data);case 9:return r.abrupt("return",e.data);case 10:case"end":return r.stop()}})})},S=function(t,e){return m.delete("/".concat(t,"/tasks/").concat(e)).then(function(n){var r;return b.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(200===n.status){a.next=9;break}r=n;case 2:if(200===r.status){a.next=8;break}return a.next=5,b.a.awrap(m.delete("/".concat(t,"/tasks/").concat(e)));case 5:r=a.sent,a.next=2;break;case 8:return a.abrupt("return",r.data);case 9:return a.abrupt("return",n.data);case 10:case"end":return a.stop()}})})},_=function(t,e){return m.put("/".concat(t),{title:e}).then(function(n){var r;return b.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(200===n.status){a.next=9;break}r=n;case 2:if(200===r.status){a.next=8;break}return a.next=5,b.a.awrap(m.put("/".concat(t),{title:e}));case 5:r=a.sent,a.next=2;break;case 8:return a.abrupt("return",r.data);case 9:return a.abrupt("return",n.data);case 10:case"end":return a.stop()}})})},C=function(t,e,n){return m.put("/".concat(t,"/tasks/").concat(e,"/reorder"),{putAfterItemId:n}).then(function(r){var a;return b.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:if(200===r.status){i.next=9;break}a=r;case 2:if(200===a.status){i.next=8;break}return i.next=5,b.a.awrap(m.put("/".concat(t,"/tasks/").concat(e,"/reorder"),{putAfterItemId:n}));case 5:a=i.sent,i.next=2;break;case 8:return i.abrupt("return",a.data);case 9:return i.abrupt("return",r.data);case 10:case"end":return i.stop()}})})},$=function(t,e){return m.put("/".concat(t,"/reorder"),{putAfterItemId:e}).then(function(n){var r;return b.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:if(200===n.status){a.next=9;break}r=n;case 2:if(200===r.status){a.next=8;break}return a.next=5,b.a.awrap(m.put("/".concat(t,"/reorder"),{putAfterItemId:e}));case 5:r=a.sent,a.next=2;break;case 8:return a.abrupt("return",r.data);case 9:return a.abrupt("return",n.data);case 10:case"end":return a.stop()}})})},R=n(76),A=function(t,e,n){var r=t[e],a=t.length,i=e-n;return i>0?[].concat(Object(x.a)(t.slice(0,n)),[r],Object(x.a)(t.slice(n,e)),Object(x.a)(t.slice(e+1,a))):i<0?[].concat(Object(x.a)(t.slice(0,e)),Object(x.a)(t.slice(e+1,n+1)),[r],Object(x.a)(t.slice(n+1,a))):t},H=[{background:"#B5838D",concaveBackground:"linear-gradient(145deg, #a3767f, #c28c97)",shadows:"20px 20px 40px #9a6f78, -20px -20px 40px #d097a2",innerShadows:"inset 20px 20px 40px #9a6f78, inset -20px -20px 40px #d097a2",littleShadows:"5px 5px 10px #9a6f78, -5px -5px 10px #d097a2;",innerLittleShadows:"inset 5px 5px 10px #9a6f78, inset -5px -5px 10px #d097a2",progressBarColor:"#d097a2",color:"white"},{background:"#E5989B",concaveBackground:"linear-gradient(145deg, #ce898c, #f5a3a6)",shadows:"20px 20px 40px #c38184, -20px -20px 40px #ffafb2",innerShadows:"inset 20px 20px 40px #c38184, inset -20px -20px 40px #ffafb2",littleShadows:"5px 5px 10px #c38184, -5px -5px 10px #ffafb2;",innerLittleShadows:"inset 5px 5px 10px #c38184, inset -5px -5px 10px #ffafb2",progressBarColor:"#ffafb2",color:"white"},{background:"#FFB4A2",concaveBackground:"linear-gradient(145deg, #e6a292, #ffc1ad)",shadows:"20px 20px 40px #d49586, -20px -20px 40px #ffd3be",innerShadows:"inset 20px 20px 40px #d49586, inset -20px -20px 40px #ffd3be",littleShadows:"5px 5px 10px #d49586, -5px -5px 10px #ffd3be;",innerLittleShadows:"inset 5px 5px 10px #d49586, inset -5px -5px 10px #ffd3be",progressBarColor:"#ffd3be",color:"white"},{background:"#FFCDB2",concaveBackground:"linear-gradient(145deg, #e6b9a0, #ffdbbe)",shadows:"20px 20px 40px #d4aa94, -20px -20px 40px #fff0d0",innerShadows:"inset 20px 20px 40px #d4aa94, inset -20px -20px 40px #fff0d0",littleShadows:"5px 5px 10px #d4aa94, -5px -5px 10px #fff0d0;",innerLittleShadows:"inset 5px 5px 10px #d4aa94, inset -5px -5px 10px #fff0d0",progressBarColor:"#fff0d0",color:"white"}],z={background:"#6D6875",concaveBackground:"linear-gradient(145deg, #625e69, #756f7d)",shadows:"20px 20px 40px #5e5965, -20px -20px 40px #7c7785",innerShadows:"inset 20px 20px 40px #5e5965, inset -20px -20px 40px #7c7785",littleShadows:"5px 5px 10px #5d5863, -5px -5px 10px #7d7887",innerLittleShadows:"inset 5px 5px 10px #5d5863, inset -5px -5px 10px #7d7887",progressBarColor:"#7c7785",color:"white",default:!0},N="#1a0b3b",B="20px 20px 40px #0a0418, -20px -20px 40px #2a125e",M="5px 5px 10px #0a0418, -5px -5px 10px #2a125e",D="white",W={todoLists:[],deepCopy:[],editable:!1,listsOrder:[],tasksOrder:[],newListsId:[],newTasksId:[],errorsNumber:0,focusedStatus:!1,currentPaletteIndex:z,initialLoadingState:!0,pendingState:!1,swapState:!1,fetchingState:!1,closeLookState:!1,height:0,width:0,interfaceHeight:0,allTasks:0,completedTasks:0},P=function(t){return{type:"functionalReducer/ADD_TODO_LIST",newTodoList:t}},X=function(t,e){return{type:"functionalReducer/ADD_TASK",newTask:t,todoListId:e}},K=function(t){return{type:"functionalReducer/CHANGE_TASK",task:t}},Y=function(t){return{type:"functionalReducer/DELETE_TODO_LIST",todoListId:t}},q=function(t,e){return{type:"functionalReducer/DELETE_TASK",taskId:e,todoListId:t}},F=function(t,e){return{type:"functionalReducer/CHANGE_TODO_LIST_TITLE",todoListId:t,todoListTitle:e}},G=function(){return{type:"functionalReducer/ENABLE_EDIT_MODE"}},Z=function(){return{type:"functionalReducer/DISABLE_EDIT_MODE"}},U=function(){return{type:"functionalReducer/SET_ERROR"}},J=function(t){return{type:"functionalReducer/SET_FOCUSED_STATUS",status:t}},Q=function(t,e){return{type:"functionalReducer/SWAP_TASKS",todoListId:t,newTasksOrder:e}},V=function(t){return{type:"functionalReducer/SWAP_TODO_LISTS",newListsOrder:t}},tt=function(t){return{type:"functionalReducer/SET_NEW_ID",newTodoLists:t}},et=function(t){return{type:"functionalReducer/SET_CURRENT_PALETTE_INDEX",palette:t}},nt=function(){return{type:"functionalReducer/REJECT_ALL_CHANGES"}},rt=function(){return{type:"functionalReducer/COMPLETE_INITIAL_LOADING_STATE"}},at=function(t){return{type:"functionalReducer/SET_PENDING_STATE",pendingState:t}},it=function(t){return{type:"functionalReducer/SET_HEIGHT",height:t}},ot=function(t){return{type:"functionalReducer/SET_WIDTH",width:t}},ct=function(t){return{type:"functionalReducer/SET_INTERFACE_HEIGHT",height:t}},ut=function(t){return{type:"functionalReducer/SET_ALL_TASKS",tasks:t}},st=function(t){return{type:"functionalReducer/SET_COMPLETED_TASK",restore:t}},dt=function(t){return{type:"functionalReducer/SET_SWAP_STATE",state:t}},lt=function(t){return{type:"functionalReducer/SET_FETCHING_STATE",state:t}},pt=function(t){return{type:"functionalReducer/SET_CLOSE_LOOK_STATE",state:t}},ft=function(t){return function(e){var n,r,a;return b.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return t||e(lt(!0)),i.next=3,b.a.awrap(y());case 3:if(n=i.sent,r=n,0===n.length){i.next=11;break}return e(ut(n.length)),e(st(!0)),a=n.map(function(t){return b.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.a.awrap(L(t.id).then(function(n){var a=r.findIndex(function(e){return t.id===e.id});r[a]=Object(p.a)({},t,{tasks:n.items}),e(st(!1))}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}})}),i.next=11,b.a.awrap(Promise.all(a));case 11:e(tt(r)),t&&setTimeout(function(){return e(rt())},600);case 13:case"end":return i.stop()}})}},bt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"functionalReducer/SET_TODO_LISTS":return Object(p.a)({},t,{todoLists:e.todoLists});case"functionalReducer/SET_TASKS":return Object(p.a)({},t,{todoLists:t.todoLists.map(function(t){return t.id===e.todoListId?Object(p.a)({},t,{tasks:e.tasks}):t})});case"functionalReducer/ADD_TODO_LIST":return Object(p.a)({},t,{todoLists:[e.newTodoList].concat(Object(x.a)(t.todoLists))});case"functionalReducer/ADD_TASK":return Object(p.a)({},t,{todoLists:t.todoLists.map(function(t){return t.id===e.todoListId?Object(p.a)({},t,{tasks:[e.newTask].concat(Object(x.a)(t.tasks))}):t})});case"functionalReducer/CHANGE_TASK":return Object(p.a)({},t,{todoLists:t.todoLists.map(function(t){return t.id===e.task.todoListId?Object(p.a)({},t,{tasks:t.tasks.map(function(t){return t.id===e.task.id?Object(p.a)({},e.task):t})}):t})});case"functionalReducer/DELETE_TODO_LIST":return Object(p.a)({},t,{todoLists:t.todoLists.filter(function(t){return t.id!==e.todoListId})});case"functionalReducer/DELETE_TASK":return Object(p.a)({},t,{todoLists:t.todoLists.map(function(t){return t.id===e.todoListId?Object(p.a)({},t,{tasks:t.tasks.filter(function(t){return t.id!==e.taskId})}):t})});case"functionalReducer/CHANGE_TODO_LIST_TITLE":return Object(p.a)({},t,{todoLists:t.todoLists.map(function(t){return t.id===e.todoListId?Object(p.a)({},t,{title:e.todoListTitle}):t})});case"functionalReducer/SWAP_TODO_LISTS":return Object(p.a)({},t,{listsOrder:e.newListsOrder});case"functionalReducer/SWAP_TASKS":var n=t.tasksOrder.findIndex(function(t){return t.todoListId===e.todoListId}),r=-1!==n?t.tasksOrder.map(function(t,r){return r===n?{todoListId:e.todoListId,newTasksOrder:e.newTasksOrder}:t}):[].concat(Object(x.a)(t.tasksOrder),[{todoListId:e.todoListId,newTasksOrder:e.newTasksOrder}]);return Object(p.a)({},t,{tasksOrder:r});case"functionalReducer/ENABLE_EDIT_MODE":return Object(p.a)({},t,{editable:!0,listsOrder:[],tasksOrder:[],errorsNumber:0,deepCopy:Object(R.a)(t.todoLists)});case"functionalReducer/DISABLE_EDIT_MODE":return Object(p.a)({},t,{editable:!1});case"functionalReducer/SET_ERROR":return Object(p.a)({},t,{errorsNumber:t.errorsNumber+1});case"functionalReducer/SET_FOCUSED_STATUS":return Object(p.a)({},t,{focusedStatus:e.status});case"functionalReducer/SET_NEW_ID":return Object(p.a)({},t,{todoLists:e.newTodoLists});case"functionalReducer/SET_CURRENT_PALETTE_INDEX":return Object(p.a)({},t,{currentPaletteIndex:e.palette});case"functionalReducer/REJECT_ALL_CHANGES":return Object(p.a)({},t,{todoLists:t.deepCopy,editable:!1,listsOrder:[],tasksOrder:[]});case"functionalReducer/COMPLETE_INITIAL_LOADING_STATE":return Object(p.a)({},t,{initialLoadingState:!1});case"functionalReducer/SET_PENDING_STATE":return Object(p.a)({},t,{pendingState:e.pendingState});case"functionalReducer/SET_HEIGHT":return Object(p.a)({},t,{height:e.height});case"functionalReducer/SET_WIDTH":return Object(p.a)({},t,{width:e.width});case"functionalReducer/SET_INTERFACE_HEIGHT":return Object(p.a)({},t,{interfaceHeight:e.height});case"functionalReducer/SET_ALL_TASKS":return Object(p.a)({},t,{allTasks:e.tasks});case"functionalReducer/SET_COMPLETED_TASK":return Object(p.a)({},t,{completedTasks:e.restore?0:t.completedTasks+1});case"functionalReducer/SET_SWAP_STATE":return Object(p.a)({},t,{swapState:e.state});case"functionalReducer/SET_CLOSE_LOOK_STATE":return Object(p.a)({},t,{closeLookState:e.state});default:return t}},ht=n(3),xt=n(9),gt=n(23),wt=n(26),mt=u.b.div.withConfig({displayName:"TaskButtons__TaskButtonWrapper",componentId:"sc-99vh99-0"})(["z-index:0;position:absolute;width:0;height:0;transform:translateX(-70%);transition:.25s cubic-bezier(0.25,0,0,1);overflow:hidden;"]),vt=u.b.div.withConfig({displayName:"TaskButtons__Button",componentId:"sc-99vh99-1"})(["display:grid;place-items:center;position:absolute;width:2rem;height:2rem;cursor:pointer;left:10px;font-size:15px;border-radius:100%;background-color:",";box-shadow:",";transition:.25s cubic-bezier(0.25,0,0,1);&:hover{background-color:",";color:white;}&:first-child:nth-last-child(2),&:first-child:nth-last-child(2) ~ *{&:nth-child(1){top:5px;}&:nth-child(2){bottom:5px;}}"],function(t){return t.$palette.background},function(t){return t.$palette.littleShadows},N),kt=a.a.memo(function(t){var e=t.deleteTask,n=t.editTask,r=t.palette;return a.a.createElement(mt,null,a.a.createElement(vt,{onClick:n,$palette:r},a.a.createElement(wt.a,{icon:"edit"})),a.a.createElement(vt,{onClick:e,$palette:r},a.a.createElement(wt.a,{icon:"trash"})))}),Ot=function(t){return null!==t&&!/^\s*$/.test(t)&&t.length<100},yt=u.b.div.withConfig({displayName:"TaskCheckbox__CheckboxWrapper",componentId:"sc-1unr9n-0"})(["width:31px;height:31px;position:relative;padding-top:10px;padding-left:10px;opacity:",";--background:#fff;--border:#D1D6EE;--border-hover:#BBC1E1;--border-active:#1E2235;--tick:#fff;"],function(t){return t.$editable?0:1}),jt=u.b.input.withConfig({displayName:"TaskCheckbox__Checkbox",componentId:"sc-1unr9n-1"})(["z-index:9;width:21px;height:21px;display:block;-webkit-appearance:none;-moz-appearance:none;position:relative;outline:none;background:rgba(255,255,255,0.8);border:none;margin:0;padding:0;cursor:pointer;border-radius:4px;transition:box-shadow .3s;box-shadow:inset 0 0 0 var(--s,1px) var(--b,var(--border));&:hover{--s:2px;--b:var(--border-hover);}&:checked{--b:var(--border-active);--s:2px;transition-delay:.4s;& + svg{--a:16.1 86.12;--o:102.22;}}"]),Lt=u.b.svg.withConfig({displayName:"TaskCheckbox__Svg",componentId:"sc-1unr9n-2"})(["z-index:10;width:21px;height:21px;display:block;pointer-events:none;fill:none;stroke-width:2px;stroke-linecap:round;stroke-linejoin:round;stroke:var(--stroke,var(--border-active));position:absolute;top:10px;left:10px;transform:scale(var(--scale,1)) translateZ(0);stroke-dasharray:var(--a,86.12);stroke-dashoffset:var(--o,86.12);transition:stroke-dasharray .6s,stroke-dashoffset .6s;"]),It=a.a.memo(function(t){var e=t.task,n=t.changeDoneStatus,r=t.editable;t.palette;return a.a.createElement(yt,{$editable:r},a.a.createElement(jt,{type:"checkbox",checked:2===e.status,disabled:r,onChange:function(t){return n(t)}}),a.a.createElement(Lt,null,a.a.createElement("path",{d:"M5,10.75 L8.5,14.25 L19.4,2.3 C18.8333333,1.43333333 18.0333333,1 17,1 L4,1 C2.35,1 1,2.35 1,4 L1,17 C1,18.65 2.35,20 4,20 L17,20 C18.65,20 20,18.65 20,17 L20,7.99769186"})))}),Et=n(24),Tt=n.n(Et),St=Object(u.b)(xt.animated.div).withConfig({displayName:"TodoListTask__TaskWrapper",componentId:"sc-1t7no7s-0"})(["position:relative;text-align:left;z-index:",";",""],function(t){return t.$editorState?2:1},function(t){return t.$editable&&"&:hover ".concat(mt,",  ").concat(mt,":focus-within {\n       width: 4rem;\n       height: calc(100% + 10px);\n       left: -10px;\n       top: -5px\n     }")}),_t=u.b.div.withConfig({displayName:"TodoListTask__TaskBackground",componentId:"sc-1t7no7s-1"})(["padding:15px 0;background:",";color:",";display:flex;position:relative;border-radius:10px;cursor:",";z-index:2;transform:scale(",');transition:transform .5s cubic-bezier(0.25,0,0,1);&:before{border-radius:10px;content:"";position:absolute;top:0;bottom:0;left:0;right:0;z-index:-1;box-shadow:',";border:3px solid transparent;transition:border .3s linear;};",""],function(t){return t.$palette.background},function(t){return t.$palette.color},function(t){return t.$editable?"grab":"inherit"},function(t){return t.$editorState?1.3:1},function(t){return t.$palette.littleShadows},function(t){return t.$editable&&"&:hover:before {\n             border: 3px solid ".concat(N,"\n        };\n        &:hover ").concat(mt,",  ").concat(mt,":focus-within {\n           width: 4rem;\n           height: 5rem;\n           left: -10px\n        }")}),Ct=u.b.div.withConfig({displayName:"TodoListTask__TaskText",componentId:"sc-1t7no7s-2"})(["padding:10px;outline:none;display:inline-block;min-width:100px;overflow-wrap:break-word;-webkit-line-break:after-white-space;width:100%;"]),$t=a.a.memo(function(t){var e=t.task,n=t.todoListId,i=t.palette,o=Object(ht.c)(),c=Object(ht.d)(function(t){return t.todoList.editable},ht.b),u=Object(ht.d)(function(t){return t.todoList.focusedStatus},ht.b),s=Object(r.useState)(!1),d=Object(h.a)(s,2),l=d[0],f=d[1],b=Object(r.useCallback)(function(){f(!0),o(J(!0))},[]),x=Object(r.useRef)(null);Object(r.useEffect)(function(){l&&x.current.focus()},[l]);var g=Object(r.useCallback)(function(){o(q(n,e.id))},[]);Object(r.useLayoutEffect)(function(){x.current.textContent=e.title,""===e.title&&b()},[e]);var w=Object(r.useCallback)(function(t){var n=Object(p.a)({},e,{status:t.currentTarget.checked?2:0});o(K(n))},[e]),m=Object(r.useCallback)(function(){var t=x.current.textContent;if(console.log(Ot(t)),Ot(t)){var n=Object(p.a)({},e,{title:t});o(K(n)),f(!1),o(J(!1))}else Ot(t)||""===e.title?(o(J(!1)),g()):(x.current.textContent=e.title,f(!1),o(J(!1)))},[e]),v=Object(r.useCallback)(function(t){"Enter"===t.key&&(t.preventDefault(),x.current.blur())},[]);e.priority;return a.a.createElement(St,{$editable:c&&!u,$editorState:l},a.a.createElement(kt,{editTask:b,deleteTask:g,palette:i}),a.a.createElement(_t,{$editable:c,$palette:i,$editorState:l},a.a.createElement(It,{task:e,changeDoneStatus:w,editable:c,palette:i}),a.a.createElement(Ct,{contentEditable:l,onKeyPress:function(t){return v(t)},ref:x,onBlur:m})))},Tt.a),Rt=u.b.div.withConfig({displayName:"TodoListTasks__TasksWrapper",componentId:"sc-1aqr7qq-0"})(["user-select:none;position:relative;height:","px;transition:height 0.3s cubic-bezier(0.25,0,0,1) 0.2s;"],function(t){return t.$height}),At=Object(u.b)(xt.animated.div).withConfig({displayName:"TodoListTasks__TaskWrapper",componentId:"sc-1aqr7qq-1"})(["position:absolute;width:100%;overflow:visible;padding:10px 0;pointer-events:auto;text-align:center;font-size:14.5px;"]),Ht=a.a.memo(function(t){var e=t.tasks,n=t.todoListId,i=t.setHeight,o=t.palette,c=t.setHoveredStatus,u=Object(ht.d)(function(t){return t.todoList.editable},ht.b),s=Object(ht.d)(function(t){return t.todoList.width},ht.b),d=Object(ht.c)(),l=Object(r.useCallback)(function(t,n,r,a){return function(i){if(n&&i===r&&void 0!==a){var o=a>k.current[1]?k.current[1]+.1*(a-k.current[1]):a<k.current[0]?k.current[0]+.1*(a-k.current[0]):a;return{scale:1.2,zIndex:2,y:b.current+o,opacity:1,immediate:function(t){return"zIndex"===t||"y"===t}}}return{scale:1,y:m.current.length<e.length?m.current[t.indexOf(e.length-i-2)]||0:m.current[t.indexOf(e.length-i-1)]||0,zIndex:"inherit",opacity:1,immediate:!1}}},[e]),f=Object(r.useRef)([]),b=Object(r.useRef)(0),g=Object(r.useRef)([]),w=Object(r.useRef)([]),m=Object(r.useRef)([]),v=Object(r.useRef)([]),k=Object(r.useRef)([]),O=Object(r.useRef)([]),y=Object(r.useRef)([]),j=Object(r.useState)(0),L=Object(h.a)(j,2),I=L[0],E=L[1],T=Object(xt.useSprings)(e.length,l(f.current),[e]),S=Object(h.a)(T,2),_=S[0],C=S[1],$=Object(r.useState)(0),R=Object(h.a)($,2),H=R[0],z=R[1];Object(r.useEffect)(function(){y.current=e.map(function(){return a.a.createRef()}),z(H+1)},[e]),Object(r.useLayoutEffect)(function(){if(u||0===e.length||(f.current=e.map(function(t,e){return e}),v.current=y.current.map(function(t){return t.current.offsetHeight})),u&&e.length>w.current.length&&(f.current=[0].concat(Object(x.a)(f.current.map(function(t){return t+1}))),v.current=[y.current[0].current.offsetHeight].concat(Object(x.a)(v.current))),u&&e.length<w.current.length){var t=w.current.findIndex(function(t){return-1===e.findIndex(function(e){return e.id===t})}),n=f.current.indexOf(t);f.current=f.current.filter(function(e){return e!==t}).map(function(e){return e>t?e-1:e}),v.current=v.current.filter(function(t,e){return e!==n})}e.length===w.current.length&&(v.current=y.current.map(function(t){return t.current.offsetHeight})),N(v.current),C(l(f.current));var r=v.current.reduce(function(t,e){return t+e},0);E(r),i(r),w.current=e.map(function(t){return t.id})},[H,s]);var N=Object(r.useCallback)(function(t){m.current=t.map(function(e,n){return t.reduce(function(e,r,a){return 0!==a&&a<=n&&(e+=t[a-1]),e},0)}),O.current=m.current.map(function(e,n){return{topBorder:e,center:e+t[n]/2,bottomBorder:e+t[n]}})},[]),B=Object(r.useCallback)(function(t,e){if(e>0){for(var n=t,r=0;e>r+v.current[t+1]/2;)n+=1,r+=v.current[t+1];return n>v.current.length-1?v.current.length-1:n}if(e<0){for(var a=t,i=0;Math.abs(e)>i+v.current[t-1]/2;)a-=1,i+=v.current[t-1];return a<0?0:a}return t},[]),M=Object(gt.a)(function(t){var r=Object(h.a)(t.args,2),a=r[0],i=r[1],o=t.down,c=Object(h.a)(t.movement,2)[1],u=t.event,s=t.first;u.stopPropagation();var p=f.current.indexOf(i);s&&(b.current=m.current[p],k.current=[-b.current,m.current[e.length-1]-b.current],d(J(!0))),b.current||(b.current=m.current[p]);var x=B(p,c),w=A(f.current,p,x),O=A(v.current,p,x);if(N(O),C(l(w,o,a,c)),!o){if(f.current=w,v.current=O,b.current=null,!Tt()(f.current,g.current)){var y=f.current.map(function(t){return e[t].id});d(Q(n,y))}d(J(!1))}},{filterTaps:!0}),D=Object(gt.b)(function(t){var e=t.hovering;e&&c(!0),e||c(!1)});return a.a.createElement(Rt,Object.assign({$height:I},u&&Object(p.a)({},D())),e.map(function(t,r){return a.a.createElement(At,Object.assign({},u&&Object(p.a)({},M(e.length-r-1,r)),{key:t.id,style:_[e.length-r-1],ref:y.current[r]}),a.a.createElement($t,{task:t,todoListId:n,palette:o}))}))},Tt.a),zt=(n(48),u.b.div.withConfig({displayName:"TodoListTitle__ListTitle",componentId:"ny47b1-0"})(["background-image:",";color:",";position:relative;font-size:25px;text-align:center;padding:15px 10px;margin:0 auto 10px auto;width:100%;border-radius:10px;outline:none;display:inline-block;overflow-wrap:break-word;-webkit-line-break:after-white-space;transform:scale(",');transition:transform .5s cubic-bezier(0.25,0,0,1);&:before{border-radius:10px;content:"";position:absolute;top:0;bottom:0;left:0;right:0;box-shadow:',";}"],function(t){return t.$palette.background},function(t){return t.$palette.color},function(t){return t.contentEditable?1.3:1},function(t){return t.$palette.innerShadows})),Nt=a.a.memo(function(t){var e=t.listTitle,n=t.id,i=t.isTitleEditable,o=t.deleteTodoList,c=t.switchTitleMode,u=t.palette,s=Object(ht.c)();Object(r.useEffect)(function(){d.current&&i&&(d.current.focus(),s(J(!0)))},[i]);var d=Object(r.useRef)(null);Object(r.useLayoutEffect)(function(){d.current&&(d.current.textContent=e,""===e&&c(!0))},[e]);return a.a.createElement(zt,{contentEditable:i,ref:d,onKeyPress:function(t){return function(t){"Enter"===t.key&&(t.preventDefault(),d.current.blur())}(t)},onBlur:function(){Ot(d.current.textContent)?(s(F(n,d.current.textContent)),c(!1),s(J(!1))):Ot(d.current.textContent)||""===e?(s(J(!1)),o()):(d.current.textContent=e,c(!1),s(J(!1)))},$palette:u})}),Bt=u.b.div.withConfig({displayName:"ContextButtons__ButtonWrapper",componentId:"sc-1jk9sr1-0"})(["z-index:0;position:absolute;top:7px;left:7px;border-radius:100%;width:0;height:0;opacity:0;transform:translate(-50%,-50%);transition:opacity .6s cubic-bezier(0.25,0,0,1),width 0s linear .6s,height 0s linear .6s;"]),Mt=u.b.div.withConfig({displayName:"ContextButtons__Button",componentId:"sc-1jk9sr1-1"})(["display:grid;place-items:center;position:absolute;width:40px;height:40px;border-radius:100%;cursor:pointer;font-size:20px;background:",";color:",";box-shadow:",";;transition:.25s cubic-bezier(0.25,0,0,1);&:hover{background-color:",";color:",";}&:first-child:nth-last-child(3),&:first-child:nth-last-child(3) ~ *{&:nth-child(1){left:50px;top:0;}&:nth-child(2){left:0;top:0;}&:nth-child(3){left:0;top:50px;}}"],function(t){return t.styles.background},function(t){return t.styles.color},function(t){return t.styles.littleShadows},function(t){return t.styles.background},function(t){return t.styles.color}),Dt=a.a.memo(function(t){var e=t.colors,n=t.deleteTodoList,r=t.addTask,i=t.editList;return a.a.createElement(Bt,null,a.a.createElement(Mt,{styles:e,onClick:r},a.a.createElement(wt.a,{icon:"plus"})),a.a.createElement(Mt,{styles:e,onClick:n},a.a.createElement(wt.a,{icon:"trash"})),a.a.createElement(Mt,{styles:e,onClick:function(){return i(!0)}},a.a.createElement(wt.a,{icon:"edit"})))}),Wt=u.b.div.withConfig({displayName:"TodoList__SingleListWrapper",componentId:"sc-1q87794-0"})(["position:relative;transform-style:preserve-3d;transform-origin:50% 50%;backface-visibility:hidden;overflow:visible;padding:35px;font-family:NunitoSans-Light;&:hover{z-index:5;}"]),Pt=(u.b.div.withConfig({displayName:"TodoList__DetailsWrapper",componentId:"sc-1q87794-1"})(["position:absolute;top:50%;left:100%;transform-origin:50% 50%;transform:rotateZ(-90deg) translateY(-50%);transform-style:preserve-3d;font-size:25px;white-space:nowrap;"]),u.b.div.withConfig({displayName:"TodoList__SingleListBottomLayer",componentId:"sc-1q87794-2"})(["border-radius:30px;transform-style:preserve-3d;transform-origin:50% 100%;padding:25px;background:",";position:relative;transform:translateZ(0);transition:transform .6s cubic-bezier(0.25,0,0,1);",' &:before{border-radius:30px;content:"";position:absolute;top:0;z-index:-1;bottom:0;left:0;right:0;border:5px solid transparent;transition:border,opacity .3s linear;box-shadow:',";opacity:",";};",';&:after{border-radius:30px;content:"";position:absolute;top:0;z-index:-1;bottom:0;left:0;right:0;box-shadow:20px 20px 40px rgba(0,0,0,.4);transition:opacity .3s linear;opacity:',";};",""],function(t){return H[t.$palette].concaveBackground},function(t){return!t.$editable&&"&:hover {\n        transform: translateZ(100px)\n  }"},function(t){return H[t.$palette].shadows},function(t){return t.$closeLookState?1:0},function(t){return t.$editable&&!t.$focusedStatus&&!t.$isTasksHovered&&"&:hover:before {\n          border: 5px solid ".concat(N,";\n          opacity: 1\n       };\n       ").concat(Rt,":hover & {\n            border: 5px solid transparent;\n       };\n       &:hover ").concat(Bt,",  ").concat(Bt,":hover {\n       width: 120px;\n       height: 120px;\n       opacity: 1;\n       transition: opacity .6s cubic-bezier(0.25, 0, 0, 1);\n    }\n  ")},function(t){return t.$closeLookState?0:1},function(t){return t.$editable&&"&:hover:after {opacity: 0}"})),Xt=a.a.memo(function(t){var e=t.id,n=t.listTitle,i=t.listTasks,o=t.paletteIndex,c=t.setNewHeights,u=t.deleteList,s=t.closeLook,d=Object(ht.c)(),l=Object(ht.d)(function(t){return t.todoList.editable},ht.b),f=Object(ht.d)(function(t){return t.todoList.focusedStatus},ht.b),b=Object(r.useState)(!1),x=Object(h.a)(b,2),g=x[0],w=x[1],m=Object(r.useCallback)(function(t){w(t)},[]),v=Object(r.useRef)(0),k=Object(r.useRef)(null),O=Object(r.useCallback)(function(t){0===v.current&&k.current&&(v.current=k.current.offsetHeight),v.current!==t&&c(t+v.current,e)},[]),y=Object(r.useState)("All"),j=Object(h.a)(y,2),L=j[0],I=(j[1],Object(r.useCallback)(function(){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t,e){return("x"==t?16*Math.random()|0:3&e|8).toString(16)});d(X({title:"",id:t,todoListId:e},e))},[])),E=Object(r.useCallback)(function(){u(e),d(Y(e))},[]),T=i?i.filter(function(t){return"All"===L||("Active"===L?0===t.status:"Completed"===L?2===t.status:void 0)}):[],S=Object(gt.b)(function(t){var e=t.hovering;e&&d(et(H[o])),e||d(et(z))}),_=Object(r.useState)(!1),C=Object(h.a)(_,2),$=C[0],R=C[1],A=Object(r.useCallback)(function(t){R(t)},[]);return a.a.createElement(Wt,Object.assign({},!s&&Object(p.a)({},S()),{ref:k}),a.a.createElement(Pt,{$palette:o,$editable:l,$isTasksHovered:g,$closeLookState:s,$focusedStatus:f},a.a.createElement(Dt,{colors:H[o],deleteTodoList:E,addTask:I,editList:A}),a.a.createElement(Nt,{listTitle:n,id:e,isTitleEditable:$,deleteTodoList:E,switchTitleMode:A,palette:H[o]}),a.a.createElement(Ht,{todoListId:e,tasks:T,setHeight:O,palette:H[o],setHoveredStatus:m})))},Tt.a),Kt=Object(u.b)(xt.animated.div).withConfig({displayName:"CloseButton",componentId:"h88j1q-0"})(["display:grid;place-items:center;width:40px;height:40px;border-radius:100%;cursor:pointer;font-size:20px;background:",";color:",";box-shadow:",";;transition:.25s cubic-bezier(0.25,0,0,1);&:hover{background:",";color:",";}"],function(t){return t.$palette.background},function(t){return t.$palette.color},function(t){return t.$palette.littleShadows},function(t){return t.$palette.background},function(t){return t.$palette.background}),Yt=function(){var t=Object(ht.d)(function(t){return t.todoList.currentPaletteIndex},ht.b);return a.a.createElement(Kt,{$palette:t},a.a.createElement(wt.a,{icon:"times"}))},qt=Object(u.b)(xt.animated.div).withConfig({displayName:"MappedLists__TodoListContainer",componentId:"yvzgg3-0"})(["  transform-style:preserve-3d;position:absolute;width:","px;"],function(t){return t.$width}),Ft=Object(u.b)(xt.animated.div).withConfig({displayName:"MappedLists__CloseButtonAnimatedWrapper",componentId:"yvzgg3-1"})(["position:absolute;border-radius:100%;"]),Gt=a.a.memo(function(t){var e=t.setWrapperAnimation,n=t.scrollByListDrugging,i=t.setCloseLookState,o=t.returnFromCloseLookState,c=t.switchScrollBar,u=Object(ht.d)(function(t){return t.todoList.editable},ht.b),s=Object(ht.d)(function(t){return t.todoList.todoLists},Tt.a),d=Object(ht.d)(function(t){return t.todoList.width},ht.b),l=Object(ht.c)(),f=Object(r.useMemo)(function(){return d>=1700?4:d>=1100?3:d>=700?2:1},[d]),g=Object(r.useMemo)(function(){return d/f},[d]);Object(r.useEffect)(function(){E(),I(function(t){var e=O.current.find(function(e){return e.index===s.length-1-t});return{x:e.x,y:e.y}})},[d,f,g]);var w=Object(r.useRef)([]),m=Object(r.useCallback)(function(t,e){var n=w.current.findIndex(function(t){return t.id===e}),r=-1===n?[].concat(Object(x.a)(w.current),[{height:t,id:e}]):w.current.map(function(r,a){return a===n?{height:t,id:e}:r});w.current=r,r.length===s.length&&(E(),I(function(t){var e=O.current.find(function(e){return e.index===s.length-1-t});return{x:e.x,y:e.y}}))},[s,d,f,g]),v=Object(r.useCallback)(function(t){w.current=w.current.filter(function(e){return e.id!==t})},[]),k=Object(r.useRef)(0),O=Object(r.useRef)([]),y=Object(xt.useSprings)(s.length,function(t){if(0===O.current.length)return{x:0,y:0,zIndex:3,opacity:1,display:"block"};var e=O.current.find(function(e){return e.index===s.length-1-t});return{x:e?e.x:0,y:e?e.y:0,opacity:1,zIndex:3,display:"block"}},[s]),j=Object(h.a)(y,2),L=j[0],I=j[1];Object(r.useEffect)(function(){if(!u&&0===O.current.length){var t=new Array(f).fill(0);O.current=s.map(function(e,n){var r=w.current.find(function(t){return e.id===t.id}),a=r?r.height:0,i=n%f,o=g*i,c=(t[i]+=a)-a,u=o+g,s=c+a,d=o+g/2,l=c+a/2,p=n;return{x:o,y:c,height:a,id:e.id,botY:s,rightX:u,horizontalCenter:d,verticalCenter:l,index:p}}),k.current=Math.max.apply(Math,Object(x.a)(t)),l(it(k.current))}if(u&&O.current.length<s.length&&(O.current=[{x:0,y:0,height:0,id:s[0].id,botY:0,rightX:0,horizontalCenter:0,verticalCenter:0,index:0}].concat(Object(x.a)(O.current)).map(function(t,e){return 0===e?t:Object(p.a)({},t,{index:t.index+1})}),E()),u&&O.current.length>s.length){var e=O.current.findIndex(function(t){return-1===s.findIndex(function(e){return e.id===t.id})}),n=O.current[e];O.current=O.current.map(function(t){var e=t.index>n.index?t.index-1:t.index;return Object(p.a)({},t,{index:e})}).filter(function(t,n){return n!==e}),E()}O.current.length===s.length&&E(),I(function(t){var e=O.current.find(function(e){return e.index===s.length-1-t});return{x:e.x,y:e.y}})},[s]);var E=Object(r.useCallback)(function(){var t=new Array(f).fill(0);O.current=O.current.map(function(e,n){var r=w.current.find(function(t){return e.id===t.id}),a=r?r.height:0,i=n%f,o=g*i,c=(t[i]+=a)-a,u=o+g,s=c+a,d=o+g/2,l=c+a/2;return Object(p.a)({},e,{x:o,y:c,rightX:u,botY:s,horizontalCenter:d,verticalCenter:l,height:a})}),Math.max.apply(Math,Object(x.a)(t))!==k.current&&(k.current=Math.max.apply(Math,Object(x.a)(t)),l(it(k.current)))},[g,f]),T=Object(r.useCallback)(function(t,e){var n,r,a,i=new Array(f).fill(0);O.current=(n=O.current,r=t,a=e,n.map(function(t,e){return e===r?n[a]:e===a?n[r]:t})).map(function(t,e){var n=e%f,r=g*n,a=(i[n]+=t.height)-t.height,o=r+g,c=a+t.height,u=r+g/2,s=a+t.height/2;return Object(p.a)({},t,{x:r,y:a,rightX:o,botY:c,horizontalCenter:u,verticalCenter:s})}),Math.max.apply(Math,Object(x.a)(i))!==k.current&&(k.current=Math.max.apply(Math,Object(x.a)(i)),l(it(k.current)))},[g,f]),S=Object(r.useCallback)(function(t,e){var n=C.current.horizontalCenter+t,r=C.current.verticalCenter+e,a=O.current.findIndex(function(t){if(t.x<n&&t.rightX>n&&t.y<r&&t.botY>r)return!0});return a<s.length&&a>=0?a:null},[s]),_=Object(r.useCallback)(function(t,e,n){I(function(r){if(r===n)return{x:C.current.x+t,y:C.current.y+e,zIndex:4,immediate:function(t){return"zIndex"===t}};var a=O.current.find(function(t){return t.index===s.length-1-r});return{x:a.x,y:a.y}})},[s]),C=Object(r.useRef)({botY:0,height:0,horizontalCenter:0,id:"",index:0,rightX:0,verticalCenter:0,x:0,y:0}),$=Object(r.useRef)({left:0,right:0,top:0,bottom:0,pageTop:0,pageBottom:0}),R=Object(r.useRef)(null),A=Object(r.useRef)(0),N=Object(r.useRef)(0),B=Object(r.useRef)(null),M=Object(r.useCallback)(function(){var t=.22*window.innerHeight>200?.22*window.innerHeight:200,e=-C.current.x-35+R.current.offsetX,n=d-C.current.rightX+35+(d/f-R.current.offsetX),r=-C.current.y-35-R.current.offsetY-35,a=k.current-C.current.y-35-(R.current.offsetY+35),i=-R.current.clientY+t+35,o=window.innerHeight-.1*window.innerHeight+i-t;$.current={left:e,right:n,top:r,bottom:a,pageTop:i,pageBottom:o}},[d,f]),D=Object(gt.a)(function(t){var e=Object(h.a)(t.args,2),r=e[0],a=e[1],i=t.down,o=Object(h.a)(t.movement,2),c=o[0],u=o[1],d=t.active,p=t.first,f=t.event;null===f||void 0===f||f.stopPropagation();var x=O.current.findIndex(function(t){return t.index===r});if(p&&(l(J(!0)),C.current=O.current[x],R.current={offsetX:f.offsetX,offsetY:f.offsetY,clientX:f.clientX,clientY:f.clientY},M(),A.current=u,N.current=0,console.log($.current)),null!==B.current&&(clearTimeout(B.current),B.current=null),console.log(A.current),d)if(u>$.current.pageBottom&&A.current<$.current.bottom){var g=function t(){var e;return b.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return e=new Promise(function(t){B.current=window.setTimeout(function(){n("bottom"),A.current=A.current+5,N.current=N.current+5;var e=S(c,A.current);null!==e&&e!==x&&T(x,e),_(c,A.current,a),t()},10)}),console.log(A.current),r.next=4,b.a.awrap(e.then(function(e){A.current<$.current.bottom&&t()}));case 4:case"end":return r.stop()}})};b.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.awrap(g());case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}})}else if(u<$.current.pageTop&&A.current>$.current.top){var w=function t(){var e;return b.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return e=new Promise(function(t){B.current=window.setTimeout(function(){n("top"),A.current=A.current-5,N.current=N.current-5;var e=S(c,A.current);null!==e&&e!==x&&T(x,e),_(c,A.current,a),t()},10)}),console.log(A.current),r.next=4,b.a.awrap(e.then(function(e){A.current>$.current.top&&t()}));case 4:case"end":return r.stop()}})};b.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.a.awrap(w());case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}})}else{A.current=u+N.current;var m=S(c,A.current);null!==m&&m!==x&&T(x,m),_(c,A.current,a)}if(!i){R.current=null,I(function(t){var e=O.current.find(function(e){return e.index===s.length-1-t});return{x:e.x,y:e.y,zIndex:3}});var v=O.current.map(function(t){return t.id});l(V(v)),l(J(!1))}},{filterTaps:!0}),W=Object(r.useState)(null),P=Object(h.a)(W,2),X=P[0],K=P[1],Y=Object(r.useCallback)(function(t){var n;return b.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(!u&&null===X){r.next=2;break}return r.abrupt("return");case 2:return n=O.current.find(function(e){return e.index===t}),c(!1),l(pt(!0)),r.next=7,b.a.awrap(I(function(e){return e!==s.length-1-t?{to:function(t){return b.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.awrap(t({opacity:0}));case 2:return e.next=4,b.a.awrap(t({display:"none"}));case 4:case"end":return e.stop()}})}}:{to:!1}}));case 7:return l(it(n.height)),e({rotateX:0,rotateZ:0,y:0}),i(n.height),l(et(H[(s.length-1-t)%H.length])),K(t),r.next=14,b.a.awrap(I(function(e){return e!==s.length-1-t?{to:!1}:{y:window.innerHeight/2-n.height/2,x:d/2-d/f/2}}));case 14:U({to:function(t){return b.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.awrap(t({y:window.innerHeight/2-n.height/2-25,x:d/2+d/f/2-10,display:"block",immediate:!0}));case 2:return e.next=4,b.a.awrap(t({opacity:1,immediate:!1}));case 4:case"end":return e.stop()}})}});case 15:case"end":return r.stop()}})},[s,i,X]),q=Object(r.useCallback)(function(){return b.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return c(!1),U({to:function(t){return b.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.awrap(t({opacity:0}));case 2:return e.next=4,b.a.awrap(t({display:"none"}));case 4:case"end":return e.stop()}})}}),t.next=4,b.a.awrap(I(function(t){if(t!==s.length-1-X)return{to:!1};var e=O.current.find(function(t){return t.index===X});return{x:e.x,y:e.y}}));case 4:return l(pt(!1)),o(),l(it(k.current)),t.next=9,b.a.awrap(e({rotateX:45,rotateZ:45,y:275}));case 9:l(et(z)),K(null),I(function(t){return t!==s.length-1-X?{opacity:1,display:"block"}:{to:!1}});case 12:case"end":return t.stop()}})},[s,o,X]),F=Object(xt.useSpring)(function(){return{x:0,y:0,opacity:0,display:"none"}}),G=Object(h.a)(F,2),Z=G[0],U=G[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ft,{onClick:q,style:Z},a.a.createElement(Yt,null)),0!==s.length&&s.map(function(t,e){return a.a.createElement(qt,Object.assign({style:L[s.length-e-1]},u&&Object(p.a)({},D(e,s.length-e-1)),{onClick:function(){return Y(e)},$width:g,key:t.id}),a.a.createElement(Xt,{id:t.id,paletteIndex:(s.length-1-e)%H.length,deleteList:v,setNewHeights:m,closeLook:e===X,listTitle:t.title,listTasks:t.tasks}))}))},Tt.a),Zt=n(30),Ut=Object(u.b)(xt.animated.div).withConfig({displayName:"ScrollWrapper__AllLists",componentId:"sc-1icdiot-0"})(["position:relative;transform-style:preserve-3d;width:70vw;top:","px;height:calc(100vh - 280px);transform-origin:50% 100%;@media screen and (max-width:1210px){transition:top 0.5s cubic-bezier(0.25,0,0,1);top:",";width:90vw}"],function(t){return t.$editable&&!t.$closeLook?t.$interfaceHeight:0},function(t){return t.$editable?"".concat(t.$interfaceHeight,"px"):t.$closeLook?"0px":"-38vh"}),Jt=Object(u.b)(xt.animated.div).withConfig({displayName:"ScrollWrapper__ScrollableWrapper",componentId:"sc-1icdiot-1"})(["position:absolute;transform-style:preserve-3d;width:100%;z-index:1;left:50%;top:","px;transition:top 0.5s cubic-bezier(0.25,0,0,1);max-width:2000px;"],function(t){return t.top}),Qt=Object(u.b)(xt.animated.div).withConfig({displayName:"ScrollWrapper__ScrollBarWrapper",componentId:"sc-1icdiot-2"})(["position:absolute;width:30px;border-radius:10px;height:","px;top:","px;right:0;overflow:hidden;transition:.6s cubic-bezier(0.25,0,0,1);background:",";cursor:pointer;"],function(t){return t.$editable?window.innerHeight-t.$interfaceHeight:window.innerHeight},function(t){return t.$editable?t.$interfaceHeight:0},function(t){return t.$palette.progressBarColor}),Vt=Object(u.b)(xt.animated.div).withConfig({displayName:"ScrollWrapper__ScrollBarThing",componentId:"sc-1icdiot-3"})(["position:absolute;width:20px;left:50%;transform:translateX(-50%);height:","%;border-radius:10px;transition:background-image 0.3s cubic-bezier(0.25,0,0,1);background:",";&:before{transition:opacity 0.3s cubic-bezier(0.25,0,0,1);position:absolute;width:100%;height:100%;content:'';border-radius:10px;background-color:",";opacity:0;}&:hover:before{opacity:1;}"],function(t){return t.$height},function(t){return t.$drugged?N:t.$palette.background},function(t){return t.$palette.default?N:"rgba(0, 0, 0, 0.3)"}),te=function(){var t=Object(ht.d)(function(t){return t.todoList.currentPaletteIndex},ht.b),e=Object(ht.d)(function(t){return t.todoList.editable},ht.b),n=Object(ht.d)(function(t){return t.todoList.height},ht.b),i=Object(ht.d)(function(t){return t.todoList.width},ht.b),o=Object(ht.d)(function(t){return t.todoList.initialLoadingState},ht.b),c=Object(ht.d)(function(t){return t.todoList.closeLookState},ht.b),u=Object(ht.d)(function(t){return t.todoList.interfaceHeight},ht.b),s=Object(ht.c)();Object(r.useEffect)(function(){s(function(t){var e;return b.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.a.awrap(k());case 2:if(e=n.sent,console.log(e),e.data.id){n.next=7;break}return n.next=7,b.a.awrap(O());case 7:t(ft(!0));case 8:case"end":return n.stop()}})});var t=!0,e=void 0,n=function(){t&&(clearTimeout(e),e=window.setTimeout(function(){return s(ot(S.current.offsetWidth))},150))};return window.addEventListener("resize",n),function(){t=!1,window.removeEventListener("resize",n)}},[]);var d=Object(r.useState)({border:0,scrollBarHeight:0}),l=Object(h.a)(d,2),f=l[0],x=f.border,g=f.scrollBarHeight,w=l[1],m=Object(r.useState)(!1),v=Object(h.a)(m,2),y=v[0],j=v[1],L=Object(r.useState)(!1),I=Object(h.a)(L,2),E=I[0],T=I[1];Object(r.useEffect)(function(){if(n<window.innerHeight?T(!1):T(!0),!c){var t=e?n-window.innerHeight<0?0:n-window.innerHeight+u:n-window.innerHeight<0?.5*n:n-window.innerHeight/2,r=n?(window.innerHeight-(e?u:0))/n*100:0;w({border:t,scrollBarHeight:r})}},[n,e,i]);var S=Object(r.useRef)(null);Object(r.useLayoutEffect)(function(){s(ot(S.current.offsetWidth))},[]);var _=Object(xt.useSpring)(function(){return{x:"-100vw",rotateX:45,rotateZ:45,y:275,config:{tension:90,clamp:!0}}}),C=Object(h.a)(_,2),$=C[0],R=C[1];Object(r.useEffect)(function(){o||R({x:window.innerWidth<=1210?"-5vw":"-15vw"})},[o]),Object(r.useEffect)(function(){o||R({x:e?window.innerWidth<=1210?"5vw":"15vw":window.innerWidth<=1210?"-5vw":"-15vw",rotateX:e?0:45,rotateZ:e?0:45,y:e?0:275})},[e]);var A=Object(r.useRef)(0),H=Object(r.useRef)(0),z=Object(r.useRef)([]),N=Object(xt.useSpring)(function(){return{y:0,top:"0%",height:0,immediate:!1}}),B=Object(h.a)(N,2),M=B[0],D=B[1];Object(r.useEffect)(function(){D({height:n}),o||R({x:e||c?window.innerWidth<=1210?"5vw":"15vw":window.innerWidth<=1210?"-5vw":"-15vw"})},[n,i]);var W=Object(xt.useSpring)({from:{opacity:0,right:-50,display:"none"},to:function(t){return b.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.awrap(t(E?{display:"block"}:{opacity:0,right:-50}));case 2:return e.next=4,b.a.awrap(t(E?{opacity:1,right:0}:{display:"none"}));case 4:case"end":return e.stop()}})}});Object(gt.c)(function(t){var e=Object(h.a)(t.delta,2)[1];E&&(A.current=A.current+e<x&&A.current+e>0?A.current+e:A.current+e<=0?0:x,H.current=A.current/x*(100-g),D({y:-A.current,top:"".concat(H.current,"%")}))},{domTarget:window}),Object(gt.a)(function(t){var e=Object(h.a)(t.offset,2)[1],n=t.active,r=t.event;if(Zt.isMobile&&E&&(null===r||void 0===r||r.preventDefault(),n)){var a=-e;A.current=a<x&&a>0?a:a<=0?0:x,H.current=A.current/x*(100-g),D({y:-A.current,top:"".concat(H.current,"%")})}},{domTarget:window,filterTaps:!0,eventOptions:{passive:!1}});var P=Object(gt.a)(function(t){var n=Object(h.a)(t.delta,2)[1],r=t.event,a=t.first,i=t.down;null===r||void 0===r||r.stopPropagation(),a&&j(!0);var o=n/(e?window.innerHeight-u:window.innerHeight)*100;H.current=H.current+o>0&&H.current+o<100-g?H.current+o:H.current+o<=0?0:100-g,A.current=x*H.current/(100-g),D({y:-A.current,top:"".concat(H.current,"%"),immediate:function(t){return"top"===t}}),i||j(!1)}),X=Object(r.useCallback)(function(t){"bottom"===t&&A.current<x&&(A.current=A.current+5<x?A.current+5:x,H.current=A.current/x*(100-g),D({y:-A.current,top:"".concat(H.current,"%")})),"top"===t&&A.current>0&&(A.current=A.current-5>0?A.current-5:0,H.current=A.current/x*(100-g),D({y:-A.current,top:"".concat(H.current,"%")}))},[x,g]),K=Object(r.useCallback)(function(t){var e=t>window.innerHeight-(Zt.isMobile?100:250)?t-(window.innerHeight-(Zt.isMobile?100:250)):0;if(e>0){z.current=[A.current,H.current,x,g];var n=(window.innerHeight-(Zt.isMobile?100:250))/t*100;w({border:e,scrollBarHeight:n}),A.current=0,H.current=0,D({y:0,top:"".concat(0,"%")}),T(!0)}},[x,g]),Y=Object(r.useCallback)(function(){0!==z.current.length&&(A.current=z.current[0],H.current=z.current[1],w({border:z.current[2],scrollBarHeight:z.current[3]}),D({y:-z.current[0],top:"".concat(z.current[1],"%")})),T(!0)},[]),q=Object(r.useCallback)(function(t){return T(t)},[]);return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ut,{style:$,$editable:e,$closeLook:c,$interfaceHeight:u},a.a.createElement(Jt,{style:{y:M.y,height:M.height,translateX:"-50%"},ref:S,top:c&&E&&Zt.isMobile?50:c&&E&&!Zt.isMobile?125:25},a.a.createElement(Gt,{setWrapperAnimation:R,scrollByListDrugging:X,setCloseLookState:K,returnFromCloseLookState:Y,switchScrollBar:q}))),a.a.createElement(Qt,{$palette:t,$visible:E,style:W,$editable:e,$interfaceHeight:u},a.a.createElement(Vt,Object.assign({$palette:t,$drugged:y,style:{top:M.top}},!Zt.isMobile&&Object(p.a)({},P()),{$height:g}))))};s.b.add(d.a,l.a);var ee=Object(u.b)(xt.animated.div).withConfig({displayName:"AnimatedBackground__Background",componentId:"sc-1kie0hv-0"})(["  position:fixed;width:100vw;height:100vh;"]),ne=function(){var t=Object(ht.d)(function(t){return t.todoList.currentPaletteIndex},ht.b),e=Object(xt.useSpring)(function(){return{background:t.background}}),n=Object(h.a)(e,2),i=n[0],o=n[1];return Object(r.useEffect)(function(){o({background:t.background})},[t]),a.a.createElement(ee,{style:i})},re=Object(u.b)(xt.animated.div).withConfig({displayName:"MainInterface__RotatedBackground",componentId:"sc-104iikv-0"})(["position:absolute;z-index:998;background-color:",";width:300%;transform-origin:50% 0;left:-150%;transition:background-color 0.3s cubic-bezier(0.25,0,0,1);&:before{position:absolute;width:100%;height:100%;content:'';background-color:",";}"],function(t){return t.$palette.default?N:t.$palette.background},function(t){return t.$palette.default?N:"rgba(0, 0, 0, 0.3)"}),ae=Object(u.b)(xt.animated.div).withConfig({displayName:"MainInterface__Wrapper",componentId:"sc-104iikv-1"})(["position:absolute;font-family:NunitoSans-ExtraLight,sans-serif;box-sizing:border-box;display:grid;place-items:center;z-index:999;min-width:150px;min-height:150px;"]),ie=u.b.div.withConfig({displayName:"MainInterface__ButtonsWrapper",componentId:"sc-104iikv-2"})(["position:absolute;width:16vw;height:16vw;max-width:210px;min-width:130px;max-height:210px;min-height:130px;border-radius:50%;display:grid;place-items:center;"]),oe=u.b.div.withConfig({displayName:"MainInterface__EditButton",componentId:"sc-104iikv-3"})(["cursor:pointer;position:relative;z-index:3;width:15vw;height:15vw;max-width:210px;min-width:130px;max-height:210px;min-height:130px;border-radius:50%;box-shadow:",";background:",";"],function(t){return t.$palette.default?B:t.$palette.shadows},function(t){return t.$palette.default?N:t.$palette.background}),ce=Object(u.b)(xt.animated.div).withConfig({displayName:"MainInterface__ProgressBackground",componentId:"sc-104iikv-4"})(["width:100%;height:100%;border-radius:50%;background-color:red;position:absolute;overflow:hidden;"]),ue=Object(u.b)(xt.animated.div).withConfig({displayName:"MainInterface__Progress",componentId:"sc-104iikv-5"})(["width:100%;height:100%;border-radius:50%;position:absolute;background-color:black;"]),se=u.b.div.withConfig({displayName:"MainInterface__InnerBackground",componentId:"sc-104iikv-6"})(["width:90%;height:90%;top:5%;left:5%;position:absolute;background:",";color:",";display:grid;place-items:center;border-radius:50%;",""],function(t){return t.$palette.default?N:t.$palette.background},function(t){return t.$palette.default?D:t.$palette.color},function(t){return!t.$altBackground&&"&:hover {\n        background: ".concat(t.$palette.background,";\n        color: ").concat(t.$palette.color,";\n  }")}),de=Object(u.b)(xt.animated.div).withConfig({displayName:"MainInterface__InnerEditButtonText",componentId:"sc-104iikv-7"})(["z-index:12;text-align:center;position:absolute;overflow:hidden;top:50%;font-size:calc(15px + (50 - 15) * ((100vw - 300px) / (2000 - 300)));"]),le=u.b.div.withConfig({displayName:"MainInterface__SmallerButton",componentId:"sc-104iikv-8"})(["cursor:pointer;position:absolute;z-index:2;width:7vw;height:7vw;max-width:105px;min-width:70px;max-height:105px;min-height:70px;border-radius:50%;display:grid;place-items:center;box-shadow:",";background:",";color:",";transform:translate(-50%,-50%);top:50%;left:",";transition:left 0.4s cubic-bezier(0.25,0,0,1) 0.3s,background,color 0.4s cubic-bezier(0.25,0,0,1);&:hover{background:",";color:",";}"],function(t){return t.$palette.default?M:t.$palette.littleShadows},function(t){return t.$palette.default?N:t.$palette.background},function(t){return t.$palette.color},function(t){return t.$editable?"-20%":"50%"},function(t){return t.$palette.default?N:t.$palette.background},function(t){return t.$palette.default?D:t.$palette.color}),pe=Object(u.b)(xt.animated.div).withConfig({displayName:"MainInterface__MediumButton",componentId:"sc-104iikv-9"})(["cursor:pointer;position:absolute;z-index:1;width:10vw;height:10vw;max-width:160px;min-width:100px;max-height:160px;min-height:100px;border-radius:50%;display:grid;place-items:center;box-shadow:",";background:",";color:",";transform:translate(-50%,-50%);top:50%;left:",";transition:left 0.4s cubic-bezier(0.25,0,0,1) 0.3s,background,color 0.4s cubic-bezier(0.25,0,0,1);&:hover{background:",";color:",";}"],function(t){return t.$palette.default?M:t.$palette.littleShadows},function(t){return t.$palette.default?N:t.$palette.background},function(t){return t.$palette.color},function(t){return t.$editable?"130%":"50%"},function(t){return t.$palette.default?N:t.$palette.background},function(t){return t.$palette.default?D:t.$palette.color}),fe=u.b.div.withConfig({displayName:"MainInterface__InnerSmallerButtonText",componentId:"sc-104iikv-10"})(["text-align:center;font-size:calc(10px + (20 - 10) * ((100vw - 300px) / (2000 - 300)));"]),be=function(){var t=Object(ht.c)(),e=Object(ht.d)(function(t){return t.todoList.editable},ht.b),n=Object(ht.d)(function(t){return t.todoList.currentPaletteIndex},ht.b),i=Object(ht.d)(function(t){return t.todoList.pendingState},ht.b),o=Object(ht.d)(function(t){return t.todoList.initialLoadingState},ht.b),c=Object(ht.d)(function(t){return t.todoList.swapState},ht.b),u=Object(ht.d)(function(t){return t.todoList.allTasks},ht.b),s=Object(ht.d)(function(t){return t.todoList.completedTasks},ht.b),d=Object(ht.d)(function(t){return t.todoList.fetchingState},ht.b),l=Object(ht.d)(function(t){return t.todoList.closeLookState},ht.b),f=Object(ht.d)(function(t){return t.todoList.interfaceHeight},ht.b);Object(r.useEffect)(function(){var n=!0,r=void 0,a=function(){n&&(clearTimeout(r),r=window.setTimeout(function(){var n=e?.17*window.innerWidth>230?.17*window.innerWidth:.17*window.innerWidth<150?150:.17*window.innerWidth:Math.sqrt(Math.pow(.23*window.innerHeight,2)+Math.pow(.23*window.innerWidth,2))>300?300:Math.sqrt(Math.pow(.23*window.innerHeight,2)+Math.pow(.23*window.innerWidth,2));t(ct(n))},150))};return window.addEventListener("resize",a),function(){n=!1,window.removeEventListener("resize",a)}},[]),console.log(Math.sqrt(Math.pow(.25*window.innerHeight,2)+Math.pow(.25*window.innerWidth,2)),.17*window.innerWidth>230?.17*window.innerWidth:.17*window.innerWidth<150?150:.17*window.innerWidth),Object(r.useLayoutEffect)(function(){var n=e?.17*window.innerWidth>230?.17*window.innerWidth:.17*window.innerWidth<150?150:.17*window.innerWidth:Math.sqrt(Math.pow(.23*window.innerHeight,2)+Math.pow(.23*window.innerWidth,2));t(ct(n))},[e]);var g=Object(xt.useSpring)(function(){return{height:"100%",width:"100%",backgroundHeight:Math.sqrt(Math.pow(window.innerHeight,2)+Math.pow(window.innerWidth,2)),rotateZ:-35}}),w=Object(h.a)(g,2),m=w[0],v=w[1],k=Object(xt.useSpring)(function(){return{clipPath1:"polygon( 50% 0%, 100% 0%, 100% 200%, 50% 200%)",clipPath2:"polygon( 0% 0%, 50% 0%, 50% 200%, 0% 200%)",opacity:1}}),O=Object(h.a)(k,2),R=O[0],H=O[1];Object(r.useEffect)(function(){var t=0===u?0:s/u,e=200-(200-200*t),n=200-200*t;H(function(){return 1===t?{to:function(t){return b.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,b.a.awrap(t({clipPath1:"polygon( 50% ".concat(e,"%, 100% ").concat(e,"%, 100% 200%, 50% 200%)"),clipPath2:"polygon( 0% 0%, 50% 0%, 50% ".concat(n,"%, 0% ").concat(n,"%)")}));case 2:return r.next=4,b.a.awrap(t({opacity:0}));case 4:case"end":return r.stop()}})}}:{clipPath1:"polygon( 50% ".concat(e,"%, 100% ").concat(e,"%, 100% 200%, 50% 200%)"),clipPath2:"polygon( 0% 0%, 50% 0%, 50% ".concat(n,"%, 0% ").concat(n,"%)"),opacity:1,immediate:function(t){return"opacity"===t}}})},[u,s]),Object(r.useEffect)(function(){o||e?e?v({backgroundHeight:f,height:"20%",width:"100%",rotateZ:0}):l&&v({height:"20%",width:"20%",rotateZ:0}):v({height:"20%",width:"20%",backgroundHeight:f,rotateZ:-35,config:{friction:50}})},[e,i,o,c,d,l,f]);var z=Object(r.useMemo)(function(){return o?"Loading":e?"Submit":i?"Sending data":"Edit"},[e,i,o,c,d]),N=Object(xt.useTransition)(z,{from:{opacity:1,y:"-100%"},enter:{opacity:1,y:"0%"},leave:{opacity:0,y:"100%"}});return a.a.createElement(a.a.Fragment,null,a.a.createElement(re,{$palette:n,style:{height:m.backgroundHeight,rotateZ:m.rotateZ}}),a.a.createElement(ae,{style:{width:m.width,height:m.height}},a.a.createElement(ie,null,a.a.createElement(oe,{onClick:function(){e||t(G()),e&&t(function(t,e){var n,r,a,i,o,c,u,s,d,l,f,h,g,w,m,v,k,O,R,H,z,N,B,M,D;return b.a.async(function(W){for(;;)switch(W.prev=W.next){case 0:if(t(Z()),t(at(!0)),n=e().todoList.deepCopy,r=e().todoList.todoLists,a=e().todoList.listsOrder,i=e().todoList.tasksOrder,o=[],c=[],u=[],s=r.filter(function(t){return-1===n.findIndex(function(e){return e.id===t.id})}),d=n.filter(function(t){return-1===r.findIndex(function(e){return e.id===t.id})}),l=[],r.map(function(t){var e=n.find(function(e){return e.id===t.id});e&&t.title!==e.title&&l.push(t)}),f=[],h=[],r.map(function(t){var e=n.find(function(e){return e.id===t.id});e&&t.tasks.map(function(t){var n=e.tasks.find(function(e){return e.id===t.id});n?n&&n.title!==t.title&&h.push(t):f.push(t)}),e||0===t.tasks.length||t.tasks.map(function(t){return f.push(t)})}),g=[],n.map(function(t){var e=r.find(function(e){return e.id===t.id});e&&t.tasks.map(function(t){e.tasks.find(function(e){return e.id===t.id})||g.push(t)})}),w=0,0!==d.length&&(w+=d.length),0!==g.length&&(w+=g.length),0!==s.length&&(w+=s.length),0!==f.length&&(w+=f.length),0!==l.length&&(w+=l.length),0!==h.length&&(w+=h.length),t(ut(w)),t(st(!0)),0!==d.length&&d.map(function(e){T(e.id).then(function(e){0===e.resultCode&&t(st(!1))})}),0!==g.length&&g.map(function(e){S(e.todoListId,e.id).then(function(e){0===e.resultCode&&t(st(!1))})}),0!==l.length&&l.map(function(e){_(e.id,e.title).then(function(e){0===e.resultCode&&t(st(!1))})}),0!==h.length&&h.map(function(e){E(e.todoListId,e.id,e).then(function(e){0===e.resultCode&&t(st(!1))})}),m=function(){var e;return b.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(0===f.length){n.next=5;break}return e=f.map(function(e){return b.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.a.awrap(I(e.title,e.todoListId).then(function(n){0===n.resultCode&&c.push({newId:n.data.item.id,oldId:e.id,todoListId:n.data.item.todoListId}),0===n.resultCode&&t(st(!1))}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}})}),n.next=4,b.a.awrap(Promise.all(e));case 4:0!==i.length&&(i=i.map(function(t){var e=o.find(function(e){return e.oldId===t.todoListId}),n=t.newTasksOrder.map(function(t){var e=c.find(function(e){return e.oldId===t});return e?e.newId:t});return{todoListId:e?e.newId:t.todoListId,newTasksOrder:n}}));case 5:case"end":return n.stop()}})},0===s.length){W.next=42;break}return v=s.map(function(e){return b.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.a.awrap(j(e.title).then(function(n){0===n.resultCode&&(o.push({newId:n.data.item.id,oldId:e.id}),t(st(!1)))}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}})}),W.next=36,b.a.awrap(Promise.all(v));case 36:return 0!==f.length&&(f=f.map(function(t){var e=o.find(function(e){return e.oldId===t.todoListId});return e?Object(p.a)({},t,{todoListId:e.newId}):t})),0!==a.length&&(a=a.map(function(t){var e=o.find(function(e){return e.oldId===t});return e?e.newId:t})),W.next=40,b.a.awrap(m());case 40:W.next=44;break;case 42:return W.next=44,b.a.awrap(m());case 44:if(t(at(!1)),t(dt(!0)),u=0!==o.length?r.map(function(t){var e=o.find(function(e){return e.oldId===t.id});return e?Object(p.a)({},t,{id:e.newId}):t}):r,0!==c.length&&(u=u.map(function(t){var e=t.tasks.map(function(t){var e=c.find(function(e){return e.oldId===t.id});return e?Object(p.a)({},t,{id:e.newId}):t});return Object(p.a)({},t,{tasks:e})})),!(0!==a.length||s.length>1)){W.next=62;break}if(0!==d.length&&0!==a.length&&(a=a.filter(function(t){return-1!==u.findIndex(function(e){return e.id===t})})),!(s.length>1)){W.next=56;break}return W.next=53,b.a.awrap(y().then(function(t){return t.map(function(t){return t.id})}));case 53:W.t0=W.sent,W.next=57;break;case 56:W.t0=u.map(function(t){return t.id});case 57:k=W.t0,O=[],(0!==a.length?a:u.map(function(t){return t.id})).map(function(t,e){if(t!==k[e]){0===e?O.push({swappedId:t,beforeSwappedId:null}):O.push({swappedId:t,beforeSwappedId:a[e-1]});var n=k.findIndex(function(e){return e===t});k=A(k,n,e)}}),O.map(function(e){$(e.swappedId,e.beforeSwappedId).then(function(e){0!==e.resultCode&&t(U())})});case 62:if(!(0!==i.length||f.length>1)){W.next=83;break}if(0!==g.length&&0!==i.length&&(i=i.map(function(t){var e=u.find(function(e){return e.id===t.todoListId});if(e){var n=t.newTasksOrder.filter(function(t){return-1!==e.tasks.findIndex(function(e){return e.id===t})});return Object(p.a)({},t,{newTasksOrder:n})}return t})),R=[],!(c.length>1)){W.next=71;break}return W.next=68,b.a.awrap(function(){var t,e,n;return b.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(c.map(function(t){var e=0!==R.length?R.find(function(e){return e.todoListId===t.todoListId}):void 0;if(e){var n=R.findIndex(function(e){return e.todoListId===t.todoListId});R[n]=Object(p.a)({},e,{tasks:[].concat(Object(x.a)(e.tasks),[t.newId])})}else R.push({todoListId:t.todoListId,tasks:[t.newId]})}),t=[],R.map(function(e){e.tasks.length>1&&t.push(e.todoListId)}),0===t.length){r.next=11;break}return e=[],n=t.map(function(t){return b.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,b.a.awrap(L(t).then(function(n){var r=n.items.map(function(t){return t.id});e.push({todoListId:t,tasks:r})}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}})}),r.next=8,b.a.awrap(Promise.all(n));case 8:return r.abrupt("return",e);case 11:return r.abrupt("return",void 0);case 12:case"end":return r.stop()}})}());case 68:W.t1=W.sent,W.next=72;break;case 71:W.t1=void 0;case 72:return H=W.t1,z=[],H&&0!==i.length?(H.map(function(t){if(!i.find(function(e){return e.todoListId===t.todoListId})){var e=u.find(function(e){return t.todoListId===e.id});z.push({todoListId:e.id,tasks:e.tasks.map(function(t){return t.id})})}}),i.map(function(t){return z.push({todoListId:t.todoListId,tasks:t.newTasksOrder})})):H||0===i.length?H&&0===i.length&&H.map(function(t){var e=u.find(function(e){return t.todoListId===e.id});z.push({todoListId:e.id,tasks:e.tasks.map(function(t){return t.id})})}):z=i.map(function(t){return{todoListId:t.todoListId,tasks:t.newTasksOrder}}),N=z.map(function(t){var e=H?H.find(function(e){return e.todoListId===t.todoListId}):void 0,n=u.find(function(e){return e.id===t.todoListId});return e||{todoListId:n.id,tasks:n.tasks.map(function(t){return t.id})}}),B=[],z.forEach(function(t){var e=N.find(function(e){return e.todoListId===t.todoListId}).tasks;t.tasks.forEach(function(n,r){if(n!==e[r]){0===r?B.push({todoListId:t.todoListId,swappedId:n,beforeSwappedId:null}):B.push({todoListId:t.todoListId,swappedId:n,beforeSwappedId:e[r-1]});var a=e.findIndex(function(t){return t===n});e=A(e,a,r)}})}),M=[],B.forEach(function(t){var e=M.find(function(e){return e.todoListId===t.todoListId});e&&M.map(function(n){return n.todoListId===e.todoListId?n.swapOrder.push({swappedId:t.swappedId,beforeSwappedId:t.todoListId}):n}),M.push({todoListId:t.todoListId,swapOrder:[{swappedId:t.swappedId,beforeSwappedId:t.beforeSwappedId}]})}),D=M.map(function(e){var n,r,a,i,o,c,u;return b.a.async(function(s){for(;;)switch(s.prev=s.next){case 0:n=e.swapOrder,r=!0,a=!1,i=void 0,s.prev=4,o=n[Symbol.iterator]();case 6:if(r=(c=o.next()).done){s.next=13;break}return u=c.value,s.next=10,b.a.awrap(C(e.todoListId,u.swappedId,u.beforeSwappedId).then(function(e){0!==e.resultCode&&t(U())}));case 10:r=!0,s.next=6;break;case 13:s.next=19;break;case 15:s.prev=15,s.t0=s.catch(4),a=!0,i=s.t0;case 19:s.prev=19,s.prev=20,r||null==o.return||o.return();case 22:if(s.prev=22,!a){s.next=25;break}throw i;case 25:return s.finish(22);case 26:return s.finish(19);case 27:case"end":return s.stop()}},null,null,[[4,15,19,27],[20,,22,26]])}),W.next=83,b.a.awrap(Promise.all(D));case 83:t(dt(!1)),0===s.length&&0===f.length||t(ft(!1));case 85:case"end":return W.stop()}})})},$palette:n},a.a.createElement(ce,{style:{opacity:R.opacity}},a.a.createElement(ue,{style:{clipPath:R.clipPath1}}),a.a.createElement(ue,{style:{clipPath:R.clipPath2}})),a.a.createElement(se,{$palette:n,$altBackground:i||o||c||d},N(function(t){return a.a.createElement(de,{style:Object(p.a)({},t,{translateY:"-50%"})},z)}))),a.a.createElement(le,{onClick:function(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t,e){return("x"==t?e=16*Math.random()|0:3&e|8).toString(16)});t(P({id:e,title:"",tasks:[]}))},$palette:n,$editable:e},a.a.createElement(fe,null,"Add list")),a.a.createElement(pe,{onClick:function(){t(nt())},$palette:n,$editable:e},a.a.createElement(fe,null,"remove changes")))))};function he(){var t=Object(c.a)(["\n  * {\n      box-sizing: border-box;\n      -webkit-font-smoothing: antialiased;\n      -moz-osx-font-smoothing: grayscale;\n      touch-action: none;\n    };\n  body {\n    background-color: white;\n    margin: 0;\n    padding: 0;\n    user-select: none;\n    outline: none;\n    &::-webkit-scrollbar { \n      display: none;\n    };\n  };\n  html {\n    -ms-overflow-style: none; \n  }\n"]);return he=function(){return t},t}s.b.add(d.a,l.a);var xe=Object(u.a)(he()),ge=u.b.div.withConfig({displayName:"App__Wrapper",componentId:"nrrwe-0"})(["position:fixed;height:100vh;width:100vw;overflow:hidden;"]),we=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(xe,null),a.a.createElement(ne,null),a.a.createElement(ge,null,a.a.createElement(be,null),a.a.createElement(te,null)))},me=n(32),ve=n(74),ke=n(75),Oe=Object(me.combineReducers)({todoList:bt}),ye=Object(me.createStore)(Oe,Object(ke.composeWithDevTools)(Object(me.applyMiddleware)(ve.a))),je=document.getElementById("root");o.a.unstable_createRoot(je).render(a.a.createElement(ht.a,{store:ye},a.a.createElement(we,null)))},48:function(t,e,n){},80:function(t,e,n){t.exports=n(111)}},[[80,1,2]]]);
//# sourceMappingURL=main.f10588d7.chunk.js.map