(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{114:function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),a=n(35),o=n.n(a),c=n(66),u=n(4),s=n(31),d=n(42),l=n(43),f=n(6),p=n(2),b=n(9);s.b.add(d.a,l.a);var h=Object(u.b)(b.animated.div).withConfig({displayName:"AnimatedBackground__Background",componentId:"y5k5nl-0"})(["  position:fixed;width:100vw;height:100vh;"]),g=function(){var t=Object(p.d)(function(t){return t.interface.currentPaletteIndex},p.b),e=Object(b.useSpring)(function(){return{background:t.background}}),n=Object(f.a)(e,2),a=n[0],o=n[1];return Object(r.useEffect)(function(){o({background:t.background})},[t,o]),i.a.createElement(h,{style:a})},x=n(3),w=n.n(x),m=[{background:"#F9DCC4",concaveBackground:"linear-gradient(145deg, #e0c6b0, #ffebd2)",shadows:"14px 14px 35px #c2ac99, -14px -14px 35px #ffffef",innerShadows:"inset 14px 14px 35px #c2ac99, inset -14px -14px 35px #ffffef",littleShadows:"5px 5px 10px #c2ac99, -5px -5px 10px #ffffef",innerLittleShadows:"inset 5px 5px 10px #c2ac99, inset -5px -5px 10px #ffffef",progressBarColor:"#ffffef",progressBarHoverColor:"#c2ac99",color:"#141718"},{background:"#F8EDEB",concaveBackground:"linear-gradient(145deg, #dfd5d4, #fffefb)",shadows:"14px 14px 35px #c1b9b7, -14px -14px 35px #ffffff",innerShadows:"inset 14px 14px 35px #c1b9b7, inset -14px -14px 35px #ffffff",littleShadows:"5px 5px 10px #c1b9b7, -5px -5px 10px #ffffff",innerLittleShadows:"inset 5px 5px 10px #c1b9b7, inset -5px -5px 10px #ffffff",progressBarColor:"#ffffff",progressBarHoverColor:"#c1b9b7",color:"#141718"},{background:"#FCD5CE",concaveBackground:"linear-gradient(145deg, #e3c0b9, #ffe4dc)",shadows:"14px 14px 35px #c5a6a1, -14px -14px 35px #fffffb",innerShadows:"inset 14px 14px 35px #c5a6a1, inset -14px -14px 35px #fffffb",littleShadows:"5px 5px 10px #c5a6a1, -5px -5px 10px #fffffb",innerLittleShadows:"inset 5px 5px 10px #c5a6a1, inset -5px -5px 10px #fffffb",progressBarColor:"#fffffb",progressBarHoverColor:"#c5a6a1",color:"#141718"},{background:"#FFB5A7",concaveBackground:"linear-gradient(145deg, #e6a396, #ffc2b3)",shadows:"14px 14px 35px #c78d82, -14px -14px 35px #ffddcc",innerShadows:"inset 14px 14px 35px #c78d82, inset -14px -14px 35px #ffddcc",littleShadows:"5px 5px 10px #c78d82, -5px -5px 10px #ffddcc",innerLittleShadows:"inset 5px 5px 10px #c78d82, inset -5px -5px 10px #ffddcc",progressBarColor:"#ffddcc",progressBarHoverColor:"#c78d82",color:"#141718"}],v={background:"#EAE8DE",concaveBackground:" linear-gradient(145deg, #d3d1c8, #faf8ee)",shadows:"14px 14px 35px #b9b7af, -14px -14px 35px #ffffff",innerShadows:"inset 14px 14px 35px #b9b7af, inset -14px -14px 35px #ffffff",littleShadows:"5px 5px 10px #b9b7af, -5px -5px 10px #ffffff",color:"#141718",innerLittleShadows:"inset 5px 5px 10px #b9b7af, inset -5px -5px 10px #ffffff",progressBarColor:"#ffffff",progressBarHoverColor:"#b9b7af",default:!0},O=n(16),k=n.n(O),j=Object(u.b)(b.animated.div).withConfig({displayName:"RotatedBackground__Background",componentId:"jqze2d-0"})(["position:absolute;z-index:998;background-color:",";width:300%;transform-origin:50% 0;left:-150%;transition:background-color 0.3s cubic-bezier(0.25,0,0,1);box-shadow:",";"],function(t){return t.$palette.default?v.background:t.$palette.background},function(t){return t.$palette.default?v.shadows:t.$palette.shadows}),y=u.b.div.withConfig({displayName:"RotatedBackground__InnerShadow",componentId:"jqze2d-1"})(["position:absolute;bottom:10px;width:100%;height:calc(100% - 10px);box-shadow:",";"],function(t){return t.$palette.default?v.innerShadows:t.$palette.innerShadows}),E=i.a.memo(function(t){var e=t.palette,n=t.height,r=t.rotateZ,a=t.x;return i.a.createElement(j,{$palette:e,style:{height:n,rotateZ:r,x:a}},i.a.createElement(y,{$palette:e}))},k.a),L=Object(u.b)(b.animated.div).withConfig({displayName:"InterfaceWrapper__WholeWrapper",componentId:"uxxb0m-0"})(["position:absolute;font-family:'Made Evolve Sans Light',sans-serif;box-sizing:border-box;display:grid;place-items:center;z-index:999;"]),I=u.b.div.withConfig({displayName:"InterfaceWrapper__ButtonsWrapper",componentId:"uxxb0m-1"})(["position:absolute;width:","px;height:","px;border-radius:30px;display:grid;place-items:center;"],function(t){return.8*t.$height},function(t){return.8*t.$height}),S=function(t){var e=t.width,n=t.height,r=t.children,a=t.interfaceHeight,o=t.x;return i.a.createElement(L,{style:{width:e,height:n,x:o}},i.a.createElement(I,{$height:a},r))},T=n(5),C=u.b.div.withConfig({displayName:"EditButton__EditButtonWrapper",componentId:"sc-9lzj78-0"})(["position:relative;z-index:3;width:","px;height:","px;border-radius:30px;box-shadow:",";background:",";"],function(t){return.8*t.$height},function(t){return.8*t.$height},function(t){return t.$palette.default?v.shadows:t.$palette.shadows},function(t){return t.$palette.default?v.background:t.$palette.background}),_=Object(u.b)(b.animated.div).withConfig({displayName:"EditButton__ProgressBackground",componentId:"sc-9lzj78-1"})(["position:absolute;width:100%;border-radius:30px;top:0;background-color:red;"]),$=u.b.div.withConfig({displayName:"EditButton__InnerBackground",componentId:"sc-9lzj78-2"})(["cursor:",";width:90%;height:90%;top:5%;left:5%;position:absolute;background-color:",";color:",';display:grid;place-items:center;border-radius:30px;&:before{border-radius:25px;content:"";position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);z-index:1;width:calc(100% - 6px);height:calc(100% - 6px);box-shadow:',";opacity:0;transition:opacity .3s linear;}",""],function(t){return t.$cantBeHovered?"inherit":"pointer"},function(t){return t.$palette.default?v.background:t.$palette.background},function(t){return t.$palette.default?v.color:t.$palette.color},function(t){return t.$palette.innerShadows},function(t){return!t.$cantBeHovered&&"&:hover:before {opacity: 1}"}),H=Object(u.b)(b.animated.div).withConfig({displayName:"EditButton__InnerEditButtonText",componentId:"sc-9lzj78-3"})(["z-index:12;text-align:center;position:absolute;overflow:hidden;top:50%;font-size:calc(20px + (35 - 20) * ((100vw - 300px) / (2000 - 300)));"]),B=Object(u.b)(b.animated.div).withConfig({displayName:"EditButton__ProgressCounter",componentId:"sc-9lzj78-4"})(["font-size:calc(12px + (25 - 12) * ((100vw - 300px) / (2000 - 300)));text-align:center;position:absolute;bottom:10%;border-radius:30px;"]),R=i.a.memo(function(t){var e=t.switchEditMode,n=t.palette,r=t.cantBeHovered,a=t.actionMessage,o=t.progressBarAnimation,c=t.interfaceHeight,u=Object(b.useTransition)(a,{from:{opacity:1,y:"-100%"},enter:{opacity:1,y:"0%"},leave:{opacity:0,y:"100%"}});return i.a.createElement(C,{onClick:e,$palette:n,$height:c},i.a.createElement($,{$palette:n,$cantBeHovered:r},i.a.createElement(_,{style:{height:o.height,opacity:o.opacity}}),i.a.createElement(B,{style:{opacity:o.opacity}},o.value.to(function(t){return t.toFixed(0)+" %"})),u(function(t){return i.a.createElement(H,{style:Object(T.a)({},t,{translateY:"-50%"})},a)})))},k.a),A=n(17),z=u.b.div.withConfig({displayName:"OtherButtons__RightButton",componentId:"sc-1hays78-0"})(["cursor:pointer;position:absolute;z-index:1;width:","px;height:","px;border-radius:30px;display:grid;place-items:center;box-shadow:",";background:",";color:",";transform:translate(-50%,-50%);top:50%;left:",";transition:left 0.4s cubic-bezier(0.25,0,0,1) 0.3s,background,color 0.4s cubic-bezier(0.25,0,0,1);&:hover{background:",";color:",';};&:before{border-radius:25px;content:"";position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);z-index:1;width:calc(100% - 6px);height:calc(100% - 6px);box-shadow:',";opacity:0;transition:opacity .3s linear;}&:hover:before{opacity:1}"],function(t){return.5*t.$height},function(t){return.5*t.$height},function(t){return t.$palette.default?v.littleShadows:t.$palette.littleShadows},function(t){return t.$palette.default?v.background:t.$palette.background},function(t){return t.$palette.color},function(t){return t.$editable?"150%":"50%"},function(t){return t.$palette.default?v.background:t.$palette.background},function(t){return t.$palette.default?v.color:t.$palette.color},function(t){return t.$palette.innerLittleShadows}),N=Object(u.b)(z).withConfig({displayName:"OtherButtons__LeftButton",componentId:"sc-1hays78-1"})(["left:",";"],function(t){return t.$editable?"-50%":"50%"}),D=Object(u.b)(z).withConfig({displayName:"OtherButtons__AdditionalButton",componentId:"sc-1hays78-2"})(["left:",";"],function(t){return t.$editable?"-150%":"50%"}),M=u.b.div.withConfig({displayName:"OtherButtons__InnerSmallerButtonText",componentId:"sc-1hays78-3"})(["text-align:center;font-size:calc(15px + (25 - 15) * ((100vw - 300px) / (2000 - 300)));"]),W=i.a.memo(function(t){var e=t.palette,n=t.editable,r=t.switchScrollableState,a=t.interfaceHeight,o=t.addTodoList,c=t.rejectAllChanges,u=t.scrollableState;return i.a.createElement(i.a.Fragment,null,i.a.createElement(N,{onClick:o,$palette:e,$editable:n,$height:a},i.a.createElement(M,null,"Add list")),i.a.createElement(z,{onClick:c,$palette:e,$editable:n,$height:a},i.a.createElement(M,null,"remove changes")),A.isMobile&&i.a.createElement(D,{onClick:r,$palette:e,$editable:n,$height:a},u?"Drug":"Scroll"))},k.a),P=n(12),X=n(53),F=n.n(X),K=n(54),Y=n.n(K),Z=F.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/todo-lists",withCredentials:!0,headers:{"API-KEY":"b4801660-f864-43f9-8acc-579713cc64df"}});Y()(Z,{retries:4});var G=F.a.create({baseURL:"https://social-network.samuraijs.com/api/1.1/auth",withCredentials:!0,headers:{"API-KEY":"b4801660-f864-43f9-8acc-579713cc64df"}});Y()(G,{retries:4});var q=function(){return G.get("/me").then(function(t){return t.data})},U=function(){return G.post("/login",{email:"npikolist@gmail.com",password:"512347",rememberMe:!1}).then(function(t){return t.data})},J=function(){return Z.get("").then(function(t){return t.data})},Q=function(t){return Z.post("",{title:t}).then(function(t){return t.data})},V=function(t){return Z.get("/".concat(t,"/tasks")).then(function(t){return t.data})},tt=function(t,e){return Z.post("/".concat(e,"/tasks"),{title:t}).then(function(t){return t.data})},et=function(t,e,n){return Z.put("/".concat(t,"/tasks/").concat(e),n).then(function(t){return t.data})},nt=function(t){return Z.delete("/".concat(t)).then(function(t){return t.data})},rt=function(t,e){return Z.delete("/".concat(t,"/tasks/").concat(e)).then(function(t){return t.data})},it=function(t,e){return Z.put("/".concat(t),{title:e}).then(function(t){return t.data})},at=function(t,e,n){return Z.put("/".concat(t,"/tasks/").concat(e,"/reorder"),{putAfterItemId:n}).then(function(t){return t.data})},ot=function(t,e){return Z.put("/".concat(t,"/reorder"),{putAfterItemId:e}).then(function(t){return t.data})},ct=n(77),ut=function(t,e,n){var r=t[e],i=t.length,a=e-n;return a>0?[].concat(Object(P.a)(t.slice(0,n)),[r],Object(P.a)(t.slice(n,e)),Object(P.a)(t.slice(e+1,i))):a<0?[].concat(Object(P.a)(t.slice(0,e)),Object(P.a)(t.slice(e+1,n+1)),[r],Object(P.a)(t.slice(n+1,i))):t},st={focusedStatus:!1,currentPaletteIndex:v,initialLoadingState:!0,fetchingState:null,height:0,width:0,interfaceHeight:0,allTasks:0,completedTasks:0,closeLookState:!1,scrollableState:!0,animationInProgress:!1},dt=function(t){return{type:"interfaceReducer/SET_FOCUSED_STATUS",status:t}},lt=function(t){return{type:"interfaceReducer/SET_CURRENT_PALETTE_INDEX",palette:t}},ft=function(){return{type:"interfaceReducer/COMPLETE_INITIAL_LOADING_STATE"}},pt=function(t){return{type:"interfaceReducer/SET_HEIGHT",height:t}},bt=function(t){return{type:"interfaceReducer/SET_WIDTH",width:t}},ht=function(t){return{type:"interfaceReducer/SET_INTERFACE_HEIGHT",height:t}},gt=function(t){return{type:"interfaceReducer/SET_ALL_TASKS",tasks:t}},xt=function(t){return{type:"interfaceReducer/SET_COMPLETED_TASK",restore:t}},wt=function(t){return{type:"interfaceReducer/SET_FETCHING_STATE",state:t}},mt=function(t){return{type:"interfaceReducer/SET_CLOSE_LOOK_STATE",state:t}},vt=function(t){return{type:"interfaceReducer/SET_SCROLLABLE_STATE",state:t}},Ot=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"interfaceReducer/SET_FOCUSED_STATUS":return Object(T.a)({},t,{focusedStatus:e.status});case"interfaceReducer/SET_CURRENT_PALETTE_INDEX":return Object(T.a)({},t,{currentPaletteIndex:e.palette});case"interfaceReducer/COMPLETE_INITIAL_LOADING_STATE":return Object(T.a)({},t,{initialLoadingState:!1});case"interfaceReducer/SET_HEIGHT":return Object(T.a)({},t,{height:e.height});case"interfaceReducer/SET_WIDTH":return Object(T.a)({},t,{width:e.width});case"interfaceReducer/SET_INTERFACE_HEIGHT":return Object(T.a)({},t,{interfaceHeight:e.height});case"interfaceReducer/SET_ALL_TASKS":return Object(T.a)({},t,{allTasks:e.tasks});case"interfaceReducer/SET_COMPLETED_TASK":return Object(T.a)({},t,{completedTasks:e.restore?0:t.completedTasks+1});case"interfaceReducer/SET_CLOSE_LOOK_STATE":return Object(T.a)({},t,{closeLookState:e.state,animationInProgress:e.state});case"interfaceReducer/SET_SCROLLABLE_STATE":return Object(T.a)({},t,{scrollableState:e.state});default:return t}},kt={todoLists:[],deepCopy:[],editable:!1,listsOrder:[],tasksOrder:[],newListsId:[],newTasksId:[]},jt=function(t){return{type:"stateReducer/ADD_TODO_LIST",newTodoList:t}},yt=function(t,e){return{type:"stateReducer/ADD_TASK",newTask:t,todoListId:e}},Et=function(t){return{type:"stateReducer/CHANGE_TASK",task:t}},Lt=function(t){return{type:"stateReducer/DELETE_TODO_LIST",todoListId:t}},It=function(t,e){return{type:"stateReducer/DELETE_TASK",taskId:e,todoListId:t}},St=function(t,e){return{type:"stateReducer/CHANGE_TODO_LIST_TITLE",todoListId:t,todoListTitle:e}},Tt=function(){return{type:"stateReducer/ENABLE_EDIT_MODE"}},Ct=function(){return{type:"stateReducer/DISABLE_EDIT_MODE"}},_t=function(t,e){return{type:"stateReducer/SWAP_TASKS",todoListId:t,newTasksOrder:e}},$t=function(t){return{type:"stateReducer/SWAP_TODO_LISTS",newListsOrder:t}},Ht=function(t){return{type:"stateReducer/SET_NEW_ID",newTodoLists:t}},Bt=function(){return{type:"stateReducer/REJECT_ALL_CHANGES"}},Rt=function(t){return function(e){var n,r,i;return w.a.async(function(a){for(;;)switch(a.prev=a.next){case 0:return t||e(wt("fetching new data")),a.next=3,w.a.awrap(J());case 3:if(n=a.sent,r=n,0===n.length){a.next=11;break}return e(gt(n.length)),e(xt(!0)),i=n.map(function(t){return w.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.a.awrap(V(t.id).then(function(n){var i=r.findIndex(function(e){return t.id===e.id});r[i]=Object(T.a)({},t,{tasks:n.items}),e(xt(!1))}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}})}),a.next=11,w.a.awrap(Promise.all(i));case 11:e(Ht(r)),t&&setTimeout(function(){return e(ft())},600);case 13:case"end":return a.stop()}})}},At=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"stateReducer/SET_TODO_LISTS":return Object(T.a)({},t,{todoLists:e.todoLists});case"stateReducer/SET_TASKS":return Object(T.a)({},t,{todoLists:t.todoLists.map(function(t){return t.id===e.todoListId?Object(T.a)({},t,{tasks:e.tasks}):t})});case"stateReducer/ADD_TODO_LIST":return Object(T.a)({},t,{todoLists:[e.newTodoList].concat(Object(P.a)(t.todoLists))});case"stateReducer/ADD_TASK":return Object(T.a)({},t,{todoLists:t.todoLists.map(function(t){return t.id===e.todoListId?Object(T.a)({},t,{tasks:[e.newTask].concat(Object(P.a)(t.tasks))}):t})});case"stateReducer/CHANGE_TASK":return Object(T.a)({},t,{todoLists:t.todoLists.map(function(t){return t.id===e.task.todoListId?Object(T.a)({},t,{tasks:t.tasks.map(function(t){return t.id===e.task.id?Object(T.a)({},e.task):t})}):t})});case"stateReducer/DELETE_TODO_LIST":return Object(T.a)({},t,{todoLists:t.todoLists.filter(function(t){return t.id!==e.todoListId})});case"stateReducer/DELETE_TASK":return Object(T.a)({},t,{todoLists:t.todoLists.map(function(t){return t.id===e.todoListId?Object(T.a)({},t,{tasks:t.tasks.filter(function(t){return t.id!==e.taskId})}):t})});case"stateReducer/CHANGE_TODO_LIST_TITLE":return Object(T.a)({},t,{todoLists:t.todoLists.map(function(t){return t.id===e.todoListId?Object(T.a)({},t,{title:e.todoListTitle}):t})});case"stateReducer/SWAP_TODO_LISTS":return Object(T.a)({},t,{listsOrder:e.newListsOrder});case"stateReducer/SWAP_TASKS":var n=t.tasksOrder.findIndex(function(t){return t.todoListId===e.todoListId}),r=-1!==n?t.tasksOrder.map(function(t,r){return r===n?{todoListId:e.todoListId,newTasksOrder:e.newTasksOrder}:t}):[].concat(Object(P.a)(t.tasksOrder),[{todoListId:e.todoListId,newTasksOrder:e.newTasksOrder}]);return Object(T.a)({},t,{tasksOrder:r});case"stateReducer/ENABLE_EDIT_MODE":return Object(T.a)({},t,{editable:!0,listsOrder:[],tasksOrder:[],deepCopy:Object(ct.a)(t.todoLists)});case"stateReducer/DISABLE_EDIT_MODE":return Object(T.a)({},t,{editable:!1});case"stateReducer/SET_NEW_ID":return Object(T.a)({},t,{todoLists:e.newTodoLists});case"stateReducer/REJECT_ALL_CHANGES":return Object(T.a)({},t,{todoLists:t.deepCopy,editable:!1,listsOrder:[],tasksOrder:[]});default:return t}},zt=function(){var t=Object(p.c)(),e=Object(p.d)(function(t){return t.todoList.editable},p.b),n=Object(p.d)(function(t){return t.interface.currentPaletteIndex},p.b),a=Object(p.d)(function(t){return t.interface.initialLoadingState},p.b),o=Object(p.d)(function(t){return t.interface.allTasks},p.b),c=Object(p.d)(function(t){return t.interface.completedTasks},p.b),u=Object(p.d)(function(t){return t.interface.fetchingState},p.b),s=Object(p.d)(function(t){return t.interface.closeLookState},p.b),d=Object(p.d)(function(t){return t.interface.interfaceHeight},p.b),l=Object(p.d)(function(t){return t.interface.width},p.b),h=Object(p.d)(function(t){return t.interface.scrollableState},p.b),g=Object(r.useState)(0),x=Object(f.a)(g,2),m=x[0],v=x[1];Object(r.useEffect)(function(){var n=!0,r=void 0,i=function(t){return t?.17*window.innerHeight>230?230:.17*window.innerHeight<150?150:.17*window.innerHeight:e?.17*window.innerHeight>230?230:.17*window.innerHeight<150?150:.17*window.innerHeight:Math.sqrt(Math.pow(.23*window.innerHeight,2)+Math.pow(.23*window.innerWidth,2))>300?300:Math.sqrt(Math.pow(.23*window.innerHeight,2)+Math.pow(.23*window.innerWidth,2))};if(n){var a=i(!1);t(ht(a));var o=i(!0);v(o)}var c=function(){n&&(clearTimeout(r),r=window.setTimeout(function(){var e=i(!1);t(ht(e));var n=i(!0);v(n)},150))};return window.addEventListener("resize",c),function(){n=!1,window.removeEventListener("resize",c)}},[e,t]);var O=Object(r.useCallback)(function(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)});t(jt({id:e,title:"",tasks:[]}))},[t]),k=Object(r.useCallback)(function(){t(Bt())},[t]),j=Object(r.useCallback)(function(){t(vt(!h))},[h,t]),y=Object(r.useCallback)(function(){e||t(Tt()),e&&t(function(t,e){var n,r,i,a,o,c,u,s,d,l,f,p,b,h,g,x,m,v,O,k,j,y,E,L,I,S,C,_;return w.a.async(function($){for(;;)switch($.prev=$.next){case 0:if(t(Ct()),t(wt("sending data")),n=e().todoList.deepCopy,r=e().todoList.todoLists,i=e().todoList.listsOrder,a=e().todoList.tasksOrder,o=[],c=[],u=[],s=r.filter(function(t){return-1===n.findIndex(function(e){return e.id===t.id})}),d=n.filter(function(t){return-1===r.findIndex(function(e){return e.id===t.id})}),l=[],r.forEach(function(t){var e=n.find(function(e){return e.id===t.id});e&&t.title!==e.title&&l.push(t)}),f=[],p=[],r.forEach(function(t){var e=n.find(function(e){return e.id===t.id});e&&t.tasks.forEach(function(t){var n=e.tasks.find(function(e){return e.id===t.id});n?n&&n.title!==t.title&&p.push(t):f.push(t)}),e||0===t.tasks.length||t.tasks.forEach(function(t){return f.push(t)})}),b=[],n.forEach(function(t){var e=r.find(function(e){return e.id===t.id});e&&t.tasks.forEach(function(t){e.tasks.find(function(e){return e.id===t.id})||b.push(t)})}),h=0,0!==d.length&&(h+=d.length),0!==b.length&&(h+=b.length),0!==s.length&&(h+=s.length),0!==f.length&&(h+=f.length),0!==l.length&&(h+=l.length),0!==p.length&&(h+=p.length),t(gt(h)),t(xt(!0)),0!==d.length&&d.forEach(function(e){nt(e.id).then(function(e){0===e.resultCode&&t(xt(!1))})}),0!==b.length&&b.forEach(function(e){rt(e.todoListId,e.id).then(function(e){0===e.resultCode&&t(xt(!1))})}),0!==l.length&&l.forEach(function(e){it(e.id,e.title).then(function(e){0===e.resultCode&&t(xt(!1))})}),0!==p.length&&p.forEach(function(e){et(e.todoListId,e.id,e).then(function(e){0===e.resultCode&&t(xt(!1))})}),g=function(){var e;return w.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:if(0===f.length){n.next=5;break}return e=f.map(function(e){return w.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.a.awrap(tt(e.title,e.todoListId).then(function(n){0===n.resultCode&&c.push({newId:n.data.item.id,oldId:e.id,todoListId:n.data.item.todoListId}),0===n.resultCode&&t(xt(!1))}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}})}),n.next=4,w.a.awrap(Promise.all(e));case 4:0!==a.length&&(a=a.map(function(t){var e=o.find(function(e){return e.oldId===t.todoListId}),n=t.newTasksOrder.map(function(t){var e=c.find(function(e){return e.oldId===t});return e?e.newId:t});return{todoListId:e?e.newId:t.todoListId,newTasksOrder:n}}));case 5:case"end":return n.stop()}})},0===s.length){$.next=42;break}return x=s.map(function(e){return w.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.a.awrap(Q(e.title).then(function(n){0===n.resultCode&&(o.push({newId:n.data.item.id,oldId:e.id}),t(xt(!1)))}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}})}),$.next=36,w.a.awrap(Promise.all(x));case 36:return 0!==f.length&&(f=f.map(function(t){var e=o.find(function(e){return e.oldId===t.todoListId});return e?Object(T.a)({},t,{todoListId:e.newId}):t})),0!==i.length&&(i=i.map(function(t){var e=o.find(function(e){return e.oldId===t});return e?e.newId:t})),$.next=40,w.a.awrap(g());case 40:$.next=44;break;case 42:return $.next=44,w.a.awrap(g());case 44:if(t(wt("swap items")),u=0!==o.length?r.map(function(t){var e=o.find(function(e){return e.oldId===t.id});return e?Object(T.a)({},t,{id:e.newId}):t}):r,0!==c.length&&(u=u.map(function(t){var e=t.tasks.map(function(t){var e=c.find(function(e){return e.oldId===t.id});return e?Object(T.a)({},t,{id:e.newId}):t});return Object(T.a)({},t,{tasks:e})})),!(0!==i.length||s.length>1)){$.next=68;break}if(0!==d.length&&0!==i.length&&(i=i.filter(function(t){return-1!==u.findIndex(function(e){return e.id===t})})),!(s.length>1)){$.next=55;break}return $.next=52,w.a.awrap(J().then(function(t){return t.map(function(t){return t.id})}));case 52:$.t0=$.sent,$.next=56;break;case 55:$.t0=u.map(function(t){return t.id});case 56:m=$.t0,v=[],(0!==i.length?i:u.map(function(t){return t.id})).forEach(function(t,e){if(t!==m[e]){0===e?v.push({swappedId:t,beforeSwappedId:null}):v.push({swappedId:t,beforeSwappedId:i[e-1]});var n=m.findIndex(function(e){return e===t});m=ut(m,n,e)}}),O=0,k=v;case 61:if(!(O<k.length)){$.next=68;break}return j=k[O],$.next=65,w.a.awrap(ot(j.swappedId,j.beforeSwappedId));case 65:O++,$.next=61;break;case 68:if(!(0!==a.length||f.length>1)){$.next=89;break}if(0!==b.length&&0!==a.length&&(a=a.map(function(t){var e=u.find(function(e){return e.id===t.todoListId});if(e){var n=t.newTasksOrder.filter(function(t){return-1!==e.tasks.findIndex(function(e){return e.id===t})});return Object(T.a)({},t,{newTasksOrder:n})}return t})),y=[],!(c.length>1)){$.next=77;break}return $.next=74,w.a.awrap(function(){var t,e,n;return w.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:if(c.forEach(function(t){var e=0!==y.length?y.find(function(e){return e.todoListId===t.todoListId}):void 0;if(e){var n=y.findIndex(function(e){return e.todoListId===t.todoListId});y[n]=Object(T.a)({},e,{tasks:[].concat(Object(P.a)(e.tasks),[t.newId])})}else y.push({todoListId:t.todoListId,tasks:[t.newId]})}),t=[],y.forEach(function(e){e.tasks.length>1&&t.push(e.todoListId)}),0===t.length){r.next=11;break}return e=[],n=t.map(function(t){return w.a.async(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,w.a.awrap(V(t).then(function(n){var r=n.items.map(function(t){return t.id});e.push({todoListId:t,tasks:r})}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}})}),r.next=8,w.a.awrap(Promise.all(n));case 8:return r.abrupt("return",e);case 11:return r.abrupt("return",void 0);case 12:case"end":return r.stop()}})}());case 74:$.t1=$.sent,$.next=78;break;case 77:$.t1=void 0;case 78:return E=$.t1,L=[],E&&0!==a.length?(E.forEach(function(t){if(!a.find(function(e){return e.todoListId===t.todoListId})){var e=u.find(function(e){return t.todoListId===e.id});L.push({todoListId:e.id,tasks:e.tasks.map(function(t){return t.id})})}}),a.forEach(function(t){return L.push({todoListId:t.todoListId,tasks:t.newTasksOrder})})):E||0===a.length?E&&0===a.length&&E.forEach(function(t){var e=u.find(function(e){return t.todoListId===e.id});L.push({todoListId:e.id,tasks:e.tasks.map(function(t){return t.id})})}):L=a.map(function(t){return{todoListId:t.todoListId,tasks:t.newTasksOrder}}),I=L.map(function(t){var e=E?E.find(function(e){return e.todoListId===t.todoListId}):void 0,n=u.find(function(e){return e.id===t.todoListId});return e||{todoListId:n.id,tasks:n.tasks.map(function(t){return t.id})}}),S=[],L.forEach(function(t){var e=I.find(function(e){return e.todoListId===t.todoListId}).tasks;t.tasks.forEach(function(n,r){if(n!==e[r]){0===r?S.push({todoListId:t.todoListId,swappedId:n,beforeSwappedId:null}):S.push({todoListId:t.todoListId,swappedId:n,beforeSwappedId:e[r-1]});var i=e.findIndex(function(t){return t===n});e=ut(e,i,r)}})}),C=[],S.forEach(function(t){var e=C.find(function(e){return e.todoListId===t.todoListId});e&&C.map(function(n){return n.todoListId===e.todoListId?n.swapOrder.push({swappedId:t.swappedId,beforeSwappedId:t.todoListId}):n}),C.push({todoListId:t.todoListId,swapOrder:[{swappedId:t.swappedId,beforeSwappedId:t.beforeSwappedId}]})}),_=C.map(function(t){var e,n,r,i,a,o,c;return w.a.async(function(u){for(;;)switch(u.prev=u.next){case 0:e=t.swapOrder,n=!0,r=!1,i=void 0,u.prev=4,a=e[Symbol.iterator]();case 6:if(n=(o=a.next()).done){u.next=13;break}return c=o.value,u.next=10,w.a.awrap(at(t.todoListId,c.swappedId,c.beforeSwappedId));case 10:n=!0,u.next=6;break;case 13:u.next=19;break;case 15:u.prev=15,u.t0=u.catch(4),r=!0,i=u.t0;case 19:u.prev=19,u.prev=20,n||null==a.return||a.return();case 22:if(u.prev=22,!r){u.next=25;break}throw i;case 25:return u.finish(22);case 26:return u.finish(19);case 27:case"end":return u.stop()}},null,null,[[4,15,19,27],[20,,22,26]])}),$.next=89,w.a.awrap(Promise.all(_));case 89:t(wt(null)),0===s.length&&0===f.length||t(Rt(!1));case 91:case"end":return $.stop()}})})},[e,t]),L=Object(b.useSpring)(function(){return{height:window.innerHeight,width:window.innerWidth,backgroundHeight:Math.sqrt(Math.pow(window.innerHeight,2)+Math.pow(window.innerWidth,2)),rotateZ:-35,x:"0vw"}}),I=Object(f.a)(L,2),C=I[0],_=I[1],$=Object(b.useSpring)(function(){return{value:0,height:"0%",opacity:1}}),H=Object(f.a)($,2),B=H[0],A=H[1];Object(r.useEffect)(function(){e&&_({width:window.innerWidth})},[l,_,e]),Object(r.useEffect)(function(){A(function(){return c/o!==1?{value:isNaN(c/o*100)?0:c/o*100,height:"".concat(c/o*100,"%")}:{to:function(t){return w.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.awrap(t({value:isNaN(c/o*100)?0:c/o*100,height:"".concat(c/o*100,"%")}));case 2:return e.next=4,w.a.awrap(t({opacity:0}));case 4:case"end":return e.stop()}})}}})},[o,c,A]),Object(r.useEffect)(function(){a||e||s?e?_({backgroundHeight:d,height:d,width:window.innerWidth,rotateZ:0,delay:function(t){return"width"===t?300:0}}):s&&_({x:"-100vw"}):_({height:d,width:m,backgroundHeight:d,rotateZ:-35,x:"0vw",delay:function(t){return"rotateZ"===t?300:0},config:{friction:50}})},[e,a,u,s,d,_,m]);var z=Object(r.useMemo)(function(){return a?"Loading":e?"Submit":null!==u?u:"Edit"},[e,u,a]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(E,{palette:n,height:C.backgroundHeight,rotateZ:C.rotateZ,x:C.x}),i.a.createElement(S,{height:C.height,width:C.width,interfaceHeight:m,x:C.x},i.a.createElement(R,{actionMessage:z,interfaceHeight:m,cantBeHovered:a||!!u,switchEditMode:y,palette:n,progressBarAnimation:B}),i.a.createElement(W,{palette:n,editable:e,addTodoList:O,switchScrollableState:j,rejectAllChanges:k,interfaceHeight:m,scrollableState:h})))},Nt=n(18),Dt=Object(u.b)(b.animated.div).withConfig({displayName:"ScrollBar__ScrollBarWrapper",componentId:"sc-11w2ia8-0"})(["position:absolute;width:30px;border-radius:10px;height:","px;top:","px;right:","px;overflow:hidden;transition:.6s cubic-bezier(0.25,0,0,1);background:",";"],function(t){return t.$editable?window.innerHeight-t.$interfaceHeight:window.innerHeight},function(t){return t.$editable?t.$interfaceHeight:0},function(t){return t.$visible?0:-50},function(t){return t.$palette.progressBarColor}),Mt=Object(u.b)(b.animated.div).withConfig({displayName:"ScrollBar__ScrollBarThing",componentId:"sc-11w2ia8-1"})(["position:absolute;width:20px;left:50%;transform:translateX(-50%);height:","%;border-radius:10px;transition:background 0.3s cubic-bezier(0.25,0,0,1),height 0.3s cubic-bezier(0.25,0,0,1);background:",";cursor:grab;&:active{cursor:grabbing;background-color:","}&:hover{background-color:","}"],function(t){return t.$height},function(t){return t.$drugged?v.background:t.$palette.background},function(t){return t.$palette.progressBarHoverColor},function(t){return t.$palette.progressBarHoverColor}),Wt=i.a.memo(function(t){var e=t.palette,n=t.interfaceHeight,r=t.editable,a=t.bindDraggedScrollBar,o=t.scrollBarHeight,c=t.visible,u=t.drugged,s=t.top;return i.a.createElement(Dt,{$palette:e,$visible:c,$editable:r,$interfaceHeight:n},i.a.createElement(Mt,Object.assign({$palette:e,$drugged:u,style:{top:s}},!A.isMobile&&Object(T.a)({},a()),{$height:o})))},k.a),Pt=Object(u.b)(b.animated.div).withConfig({displayName:"ScrollableWrapper__AllLists",componentId:"sc-1s03hhf-0"})(["position:relative;transform-style:preserve-3d;width:70vw;top:","px;height:calc(100vh - 280px);transform-origin:50% 100%;transition:top 0.5s cubic-bezier(0.25,0,0,1);@media screen and (max-width:1210px){top:",";width:90vw}"],function(t){return t.$editable&&!t.$closeLook?t.$interfaceHeight:0},function(t){return t.$editable?"".concat(t.$interfaceHeight,"px"):t.$closeLook?"0px":"-38vh"}),Xt=Object(u.b)(b.animated.div).withConfig({displayName:"ScrollableWrapper__ScrollWrapper",componentId:"sc-1s03hhf-1"})(["position:absolute;transform-style:preserve-3d;width:100%;z-index:1;left:50%;top:","px;transition:top 0.5s cubic-bezier(0.25,0,0,1);max-width:2000px;"],function(t){return t.$top}),Ft=function(t){var e=t.children,n=t.wrapperAnimation,r=t.editable,a=t.closeLook,o=t.height,c=t.interfaceHeight,u=t.y,s=t.visible,d=t.measuredRef;return i.a.createElement(Pt,{style:n,$editable:r,$closeLook:a,$interfaceHeight:c},i.a.createElement(Xt,{style:{y:u,height:o,translateX:"-50%"},ref:d,$top:a&&s&&A.isMobile?50:a&&s&&!A.isMobile?125:25},e))},Kt=n(27),Yt=u.b.div.withConfig({displayName:"TaskButtons__TaskButtonWrapper",componentId:"zkwnii-0"})(["z-index:0;position:absolute;width:0;height:0;transform:translateX(-70%);transition:.25s cubic-bezier(0.25,0,0,1);overflow:hidden;"]),Zt=u.b.div.withConfig({displayName:"TaskButtons__Button",componentId:"zkwnii-1"})(["display:grid;place-items:center;position:absolute;width:2rem;height:2rem;cursor:pointer;left:10px;font-size:15px;border-radius:100%;background-color:",";box-shadow:",";color:",";transition:.25s cubic-bezier(0.25,0,0,1);&:hover{background-color:",";color:",";}&:first-child:nth-last-child(2),&:first-child:nth-last-child(2) ~ *{&:nth-child(1){top:5px;}&:nth-child(2){bottom:5px;}}"],function(t){return t.$palette.background},function(t){return t.$palette.littleShadows},function(t){return t.$palette.color},function(t){return t.$palette.color},function(t){return t.$palette.background}),Gt=i.a.memo(function(t){var e=t.deleteTask,n=t.editTask,r=t.palette,a=Object(Nt.a)(function(t){var e=t.tap,r=t.event;null===r||void 0===r||r.stopPropagation(),e&&n()}),o=Object(Nt.a)(function(t){var n=t.tap,r=t.event;null===r||void 0===r||r.stopPropagation(),n&&e()});return i.a.createElement(Yt,null,i.a.createElement(Zt,Object.assign({},a(),{$palette:r}),i.a.createElement(Kt.a,{icon:"edit"})),i.a.createElement(Zt,Object.assign({},o(),{$palette:r}),i.a.createElement(Kt.a,{icon:"trash"})))}),qt=function(t){return null!==t&&!/^\s*$/.test(t)&&t.length<100},Ut=u.b.div.withConfig({displayName:"TaskCheckbox__CheckboxWrapper",componentId:"sc-6vx2gg-0"})(["width:31px;height:31px;position:relative;padding-top:10px;padding-left:10px;opacity:",";--background:#fff;--border:#D1D6EE;--border-hover:#BBC1E1;--border-active:#1E2235;--tick:#fff;"],function(t){return t.$editable?0:1}),Jt=u.b.input.withConfig({displayName:"TaskCheckbox__Checkbox",componentId:"sc-6vx2gg-1"})(["z-index:9;width:21px;height:21px;display:block;-webkit-appearance:none;-moz-appearance:none;position:relative;outline:none;background:rgba(255,255,255,0.8);border:none;margin:0;padding:0;cursor:pointer;border-radius:4px;transition:box-shadow .3s;box-shadow:inset 0 0 0 var(--s,1px) var(--b,var(--border));&:hover{--s:2px;--b:var(--border-hover);}&:checked{--b:var(--border-active);--s:2px;transition-delay:.4s;& + svg{--a:16.1 86.12;--o:102.22;}}"]),Qt=u.b.svg.withConfig({displayName:"TaskCheckbox__Svg",componentId:"sc-6vx2gg-2"})(["z-index:10;width:21px;height:21px;display:block;pointer-events:none;fill:none;stroke-width:2px;stroke-linecap:round;stroke-linejoin:round;stroke:var(--stroke,var(--border-active));position:absolute;top:10px;left:10px;transform:scale(var(--scale,1)) translateZ(0);stroke-dasharray:var(--a,86.12);stroke-dashoffset:var(--o,86.12);transition:stroke-dasharray .6s,stroke-dashoffset .6s;"]),Vt=i.a.memo(function(t){var e=t.task,n=t.changeDoneStatus,r=t.editable;return i.a.createElement(Ut,{$editable:r},i.a.createElement(Jt,{type:"checkbox",checked:2===e.status,disabled:r,onChange:function(t){return n(t)}}),i.a.createElement(Qt,null,i.a.createElement("path",{d:"M5,10.75 L8.5,14.25 L19.4,2.3 C18.8333333,1.43333333 18.0333333,1 17,1 L4,1 C2.35,1 1,2.35 1,4 L1,17 C1,18.65 2.35,20 4,20 L17,20 C18.65,20 20,18.65 20,17 L20,7.99769186"})))}),te=u.b.div.withConfig({displayName:"TodoListTask__TaskWrapper",componentId:"sc-83kg0v-0"})(["position:relative;text-align:left;z-index:",";cursor:",";",""],function(t){return t.$editorState?2:1},function(t){return t.$editable?"grab":"inherit"},function(t){return t.$editable&&"&:hover ".concat(Yt,",  ").concat(Yt,":focus-within {\n       width: 4rem;\n       height: calc(100% + 10px);\n       left: -10px;\n       top: -5px\n     }")}),ee=u.b.div.withConfig({displayName:"TodoListTask__TaskBackground",componentId:"sc-83kg0v-1"})(["padding:15px 0;background:",";color:",";display:flex;position:relative;border-radius:10px;z-index:2;transform:scale(",');transition:transform .5s cubic-bezier(0.25,0,0,1);&:before{border-radius:10px;content:"";position:absolute;top:0;bottom:0;left:0;right:0;z-index:-1;box-shadow:',';};&:after{border-radius:7px;content:"";position:absolute;top:50%;left:50%;transform:translateY(-50%) translateX(-50%);z-index:1;width:calc(100% - 10px);height:calc(100% - 10px);box-shadow:',";opacity:0;transition:opacity .3s linear;};"," ",""],function(t){return t.$palette.background},function(t){return t.$palette.color},function(t){return t.$editorState?1.3:1},function(t){return t.$palette.littleShadows},function(t){return t.$palette.innerLittleShadows},function(t){return t.$editable&&"\n        &:hover:after {opacity: 1};\n        &:hover ".concat(Yt,",  ").concat(Yt,":focus-within {\n           width: 4rem;\n           height: 5rem;\n           left: -10px\n        }\n        &:active {\n           cursor: grabbing;\n           &:before {box-shadow: 10px 10px 20px rgba(0, 0, 0, .4)};\n           &:after {opacity: 1}\n        }")},function(t){return t.$editorState&&"\n    &:after {opacity: 1}\n    &:before {box-shadow: 10px 10px 20px rgba(0, 0, 0, .4)}"}),ne=u.b.div.withConfig({displayName:"TodoListTask__TaskText",componentId:"sc-83kg0v-2"})(["position:relative;padding:10px;outline:none;display:inline-block;min-width:100px;overflow-wrap:break-word;-webkit-line-break:after-white-space;font-family:'Made Evolve Sans Light',sans-serif;width:100%;font-size:20px;z-index:3;cursor:",""],function(t){return t.contentEditable?"text":"inherit"}),re=i.a.memo(function(t){var e=t.task,n=t.todoListId,a=t.palette,o=Object(p.d)(function(t){return t.todoList.editable},p.b),c=Object(p.d)(function(t){return t.interface.focusedStatus},p.b),u=Object(p.c)(),s=Object(r.useState)(!1),d=Object(f.a)(s,2),l=d[0],b=d[1],h=Object(r.useCallback)(function(){b(!0),u(lt(a)),u(dt(!0))},[a,u]),g=Object(r.useRef)(null);Object(r.useEffect)(function(){l&&g.current.focus()},[l]);var x=Object(r.useCallback)(function(){u(It(n,e.id))},[n,e.id,u]);Object(r.useLayoutEffect)(function(){g.current.textContent=e.title,""===e.title&&h()},[e,h]);var w=Object(r.useCallback)(function(t){var n=Object(T.a)({},e,{status:t.currentTarget.checked?2:0});u(Et(n))},[e,u]),m=Object(r.useCallback)(function(){var t=g.current.textContent;if(qt(t)){var n=Object(T.a)({},e,{title:t});u(Et(n)),b(!1),u(dt(!1))}else qt(t)||""===e.title?(u(dt(!1)),x()):(g.current.textContent=e.title,b(!1),u(dt(!1)))},[e,x,u]),v=Object(r.useCallback)(function(t){13!==t.keyCode&&27!==t.keyCode||(t.preventDefault(),g.current.blur())},[]),O=Object(Nt.a)(function(t){var e=t.event;null===e||void 0===e||e.stopPropagation()});return i.a.createElement(te,{$editable:o&&!c,$editorState:l},i.a.createElement(Gt,{editTask:h,deleteTask:x,palette:a}),i.a.createElement(ee,{$editable:o,$palette:a,$editorState:l},i.a.createElement(Vt,{task:e,changeDoneStatus:w,editable:o}),i.a.createElement(ne,Object.assign({contentEditable:l,onKeyDown:function(t){return v(t)},ref:g,onBlur:m},l&&Object(T.a)({},O())))))},k.a),ie=u.b.div.withConfig({displayName:"TasksContainer__TasksWrapper",componentId:"sc-2fmzkb-0"})(["user-select:none;position:relative;height:","px;transition:height 0.3s cubic-bezier(0.25,0,0,1) 0.2s;"],function(t){return t.$height}),ae=Object(u.b)(b.animated.div).withConfig({displayName:"TasksContainer__TaskWrapper",componentId:"sc-2fmzkb-1"})(["position:absolute;width:100%;overflow:visible;padding:10px 0;pointer-events:auto;text-align:center;font-size:14.5px;"]),oe=i.a.memo(function(t){var e=t.tasks,n=t.todoListId,a=t.setHeight,o=t.palette,c=t.setHoveredStatus,u=Object(p.d)(function(t){return t.todoList.editable},p.b),s=Object(p.d)(function(t){return t.interface.width},p.b),d=Object(p.d)(function(t){return t.interface.scrollableState},p.b),l=Object(p.c)(),h=Object(r.useCallback)(function(t,n,r,i){return function(a){if(n&&a===r&&void 0!==i){var o=i>j.current[1]?j.current[1]+.1*(i-j.current[1]):i<j.current[0]?j.current[0]+.1*(i-j.current[0]):i;return{scale:1.2,zIndex:2,y:x.current+o,opacity:1,immediate:function(t){return"zIndex"===t||"y"===t}}}return{scale:1,y:v.current.length<e.length?v.current[t.indexOf(e.length-a-2)]||0:v.current[t.indexOf(e.length-a-1)]||0,zIndex:"inherit",opacity:1,immediate:!1}}},[e]),g=Object(r.useRef)([]),x=Object(r.useRef)(null),w=Object(r.useRef)([]),m=Object(r.useRef)([]),v=Object(r.useRef)([]),O=Object(r.useRef)([]),j=Object(r.useRef)([]),y=Object(r.useRef)([]),E=Object(r.useRef)([]),L=Object(r.useState)(0),I=Object(f.a)(L,2),S=I[0],C=I[1],_=Object(b.useSprings)(e.length,h(g.current),[e]),$=Object(f.a)(_,2),H=$[0],B=$[1],R=Object(r.useState)(0),z=Object(f.a)(R,2),N=z[0],D=z[1];Object(r.useEffect)(function(){E.current=e.map(function(){return i.a.createRef()}),D(Math.random())},[e]);var M=Object(r.useCallback)(function(t){v.current=t.map(function(e,n){return t.reduce(function(e,r,i){return 0!==i&&i<=n&&(e+=t[i-1]),e},0)}),y.current=v.current.map(function(e,n){return{topBorder:e,center:e+t[n]/2,bottomBorder:e+t[n]}})},[]);Object(r.useLayoutEffect)(function(){if(u||0===e.length||(g.current=e.map(function(t,e){return e}),O.current=E.current.map(function(t){return t.current.offsetHeight})),u&&1===e.length&&(g.current=[0]),u&&e.length>m.current.length&&0!==E.current.length&&(g.current=[0].concat(Object(P.a)(g.current.map(function(t){return t+1}))),O.current=[E.current[0].current.offsetHeight].concat(Object(P.a)(O.current))),u&&e.length<m.current.length){var t=m.current.findIndex(function(t){return-1===e.findIndex(function(e){return e.id===t})}),n=g.current.indexOf(t);g.current=g.current.filter(function(e){return e!==t}).map(function(e){return e>t?e-1:e}),O.current=O.current.filter(function(t,e){return e!==n})}e.length===m.current.length&&(O.current=E.current.map(function(t){return t.current.offsetHeight})),M(O.current),B(h(g.current));var r=O.current.reduce(function(t,e){return t+e},0);C(r),a(r),m.current=e.map(function(t){return t.id})},[N,s,M,a,B,C,u,e,h]);var W=Object(r.useCallback)(function(t,e){if(e>0){for(var n=t,r=0;e>r+O.current[t+1]/2;)n+=1,r+=O.current[t+1];return n>O.current.length-1?O.current.length-1:n}if(e<0){for(var i=t,a=0;Math.abs(e)>a+O.current[t-1]/2;)i-=1,a+=O.current[t-1];return i<0?0:i}return t},[]),X=Object(Nt.a)(function(t){var r=Object(f.a)(t.args,2),i=r[0],a=r[1],o=t.down,c=Object(f.a)(t.movement,2)[1],u=t.event;if(!A.isMobile||!d){null===u||void 0===u||u.stopPropagation();var s=g.current.indexOf(a);null===x.current&&(x.current=v.current[s],j.current=[-x.current,v.current[e.length-1]-x.current],l(dt(!0))),x.current||(x.current=v.current[s]);var p=W(s,c),b=ut(g.current,s,p),m=ut(O.current,s,p);if(M(m),B(h(b,o,i,c)),!o){if(g.current=b,O.current=m,x.current=null,!k()(g.current,w.current)){var y=g.current.map(function(t){return e[t].id});l(_t(n,y))}l(dt(!1))}}},{filterTaps:!0}),F=Object(Nt.b)(function(t){var e=t.hovering;e&&c(!0),e||c(!1)});return i.a.createElement(ie,Object.assign({$height:S},u&&Object(T.a)({},F())),e.map(function(t,r){return i.a.createElement(ae,Object.assign({},u&&Object(T.a)({},X(e.length-r-1,r)),{key:t.id,style:H[e.length-r-1],ref:E.current[r]}),i.a.createElement(re,{task:t,todoListId:n,palette:o}))}))},k.a),ce=(n(48),u.b.div.withConfig({displayName:"TodoListTitle__ListTitle",componentId:"sc-1owtry1-0"})(["background-color:",";color:",";position:relative;font-size:30px;text-align:center;padding:15px 10px;margin:0 auto 10px auto;width:100%;cursor:",";border-radius:10px;outline:none;font-family:'MADE Evolve Bold',sans-serif;display:inline-block;overflow-wrap:break-word;-webkit-line-break:after-white-space;transform:scale(",');transition:transform .5s cubic-bezier(0.25,0,0,1);&:before{border-radius:10px;content:"";position:absolute;top:0;bottom:0;left:0;right:0;box-shadow:',";}"],function(t){return t.$palette.background},function(t){return t.$palette.color},function(t){return t.contentEditable?"text":"inherit"},function(t){return t.contentEditable?1.3:1},function(t){return t.$palette.innerShadows})),ue=i.a.memo(function(t){var e=t.listTitle,n=t.id,a=t.isTitleEditable,o=t.deleteTodoList,c=t.switchTitleMode,u=t.palette,s=Object(p.c)();Object(r.useEffect)(function(){d.current&&a&&(d.current.focus(),s(dt(!0)))},[a,s]);var d=Object(r.useRef)(null);Object(r.useLayoutEffect)(function(){d.current&&(d.current.textContent=e,""===e&&c(!0))},[e,c]);var l=Object(Nt.a)(function(t){var e=t.event;null===e||void 0===e||e.stopPropagation()});return i.a.createElement(ce,Object.assign({contentEditable:a,ref:d,onKeyDown:function(t){return function(t){13!==t.keyCode&&27!==t.keyCode||(t.preventDefault(),d.current.blur())}(t)},onBlur:function(){qt(d.current.textContent)?(s(St(n,d.current.textContent)),c(!1),s(dt(!1))):qt(d.current.textContent)||""===e?(s(dt(!1)),o()):(d.current.textContent=e,c(!1),s(dt(!1)))},$palette:u},a&&Object(T.a)({},l())))}),se=u.b.div.withConfig({displayName:"ContextButtons__ButtonWrapper",componentId:"dvcjwp-0"})(["z-index:0;position:absolute;top:7px;left:7px;border-radius:100%;width:0;height:0;opacity:0;transform:translate(-50%,-50%);transition:opacity .6s cubic-bezier(0.25,0,0,1),width 0s linear .6s,height 0s linear .6s;"]),de=u.b.div.withConfig({displayName:"ContextButtons__Button",componentId:"dvcjwp-1"})(["display:grid;place-items:center;position:absolute;width:40px;height:40px;border-radius:100%;cursor:pointer;font-size:20px;background:",";color:",";box-shadow:",";;transition:.25s cubic-bezier(0.25,0,0,1);&:hover{background-color:",";color:",";}&:first-child:nth-last-child(3),&:first-child:nth-last-child(3) ~ *{&:nth-child(1){left:50px;top:0;}&:nth-child(2){left:0;top:0;}&:nth-child(3){left:0;top:50px;}}"],function(t){return t.styles.background},function(t){return t.styles.color},function(t){return t.styles.littleShadows},function(t){return t.styles.color},function(t){return t.styles.background}),le=i.a.memo(function(t){var e=t.colors,n=t.deleteTodoList,r=t.addTask,a=t.editList;return i.a.createElement(se,null,i.a.createElement(de,{styles:e,onClick:r},i.a.createElement(Kt.a,{icon:"plus"})),i.a.createElement(de,{styles:e,onClick:n},i.a.createElement(Kt.a,{icon:"trash"})),i.a.createElement(de,{styles:e,onClick:function(){return a(!0)}},i.a.createElement(Kt.a,{icon:"edit"})))}),fe=u.b.div.withConfig({displayName:"TodoList__SingleListWrapper",componentId:"sc-1c5ch2m-0"})(["position:relative;transform-style:preserve-3d;transform-origin:50% 50%;backface-visibility:hidden;overflow:visible;padding:35px;cursor:",";&:hover{z-index:5;}",""],function(t){return t.$editable||t.$closeLookState?"inherit":"pointer"},function(t){return!t.$editable&&!t.$closeLookState&&!t.$animationInProgress&&"&:hover ".concat(pe,"{\n        transform: translateZ(100px)\n     }\n     &:hover ").concat(he,"{\n        box-shadow: 0 0 35px 20px rgba(0, 0, 0, 0.8);\n        opacity: 0.5\n     }")}),pe=u.b.div.withConfig({displayName:"TodoList__ListOuterLayer",componentId:"sc-1c5ch2m-1"})(["cursor:",";border-radius:30px;padding:35px;transform-style:preserve-3d;transform-origin:50% 100%;background:",';position:relative;transform:translateZ(0);transition:transform .6s cubic-bezier(0.25,0,0,1);&:before{border-radius:30px;content:"";position:absolute;top:0;z-index:-1;bottom:0;left:0;right:0;transition:opacity .3s linear;box-shadow:',";opacity:",";};",';&:after{border-radius:30px;content:"";position:absolute;top:0;z-index:-1;bottom:0;left:0;right:0;box-shadow:14px 14px 35px rgba(0,0,0,.4);transition:opacity .3s linear;opacity:',";};",""],function(t){return t.$editable?"grab":"inherit"},function(t){return m[t.$palette].concaveBackground},function(t){return m[t.$palette].shadows},function(t){return t.$closeLookState?1:0},function(t){return t.$editable&&!t.$focusedStatus&&!t.$isTasksHovered&&"&:hover ".concat(se,",  ").concat(se,":hover {\n           width: 120px;\n           height: 120px;\n           opacity: 1;\n           transition: opacity .6s cubic-bezier(0.25, 0, 0, 1);\n       }\n       &:hover ").concat(be," {\n           opacity: 1\n       }")},function(t){return t.$closeLookState?0:1},function(t){return t.$editable&&"\n    &:hover:after {opacity: 0};\n    &:hover:before {opacity: 1};\n    &:active {\n        cursor: grabbing;\n        &:after {opacity: 1};\n        &:before {opacity: 0};\n        ".concat(be," {opacity: 1}\n    }")}),be=u.b.div.withConfig({displayName:"TodoList__ListInnerLayer",componentId:"sc-1c5ch2m-2"})(["position:absolute;border-radius:20px;top:50%;left:50%;transform:translateX(-50%) translateY(-50%);height:calc(100% - 20px);width:calc(100% - 20px);padding:25px;box-shadow:",";opacity:0;transition:opacity .3s linear;"],function(t){return m[t.$palette].innerShadows}),he=u.b.div.withConfig({displayName:"TodoList__ListShadow",componentId:"sc-1c5ch2m-3"})(["display:",";position:absolute;z-index:-2;width:calc(100% - 80px);height:calc(100% - 80px);top:50%;left:50%;transform:translateX(-50%) translateY(-50%);border-radius:30px;background:rgba(0,0,0,0.7);box-shadow:0 0 0 0 rgba(0,0,0,0.8);opacity:0.7;transition-property:box-shadow,opacity;transition-duration:.6s;transition-timing-function:cubic-bezier(0.25,0,0,1);"],function(t){return t.$editable||t.$closeLookState?"none":"block"}),ge=i.a.memo(function(t){var e=t.id,n=t.listTitle,a=t.listTasks,o=t.paletteIndex,c=t.setNewHeights,u=t.deleteList,s=t.currentLook,d=Object(p.d)(function(t){return t.todoList.editable},p.b),l=Object(p.d)(function(t){return t.interface.focusedStatus},p.b),b=Object(p.d)(function(t){return t.interface.closeLookState},p.b),h=Object(p.d)(function(t){return t.interface.animationInProgress},p.b),g=Object(p.c)(),x=Object(r.useState)(!1),w=Object(f.a)(x,2),O=w[0],k=w[1],j=Object(r.useCallback)(function(t){k(t)},[]),y=Object(r.useRef)(0),E=Object(r.useRef)(null),L=Object(r.useCallback)(function(t){0===y.current&&E.current&&(y.current=E.current.offsetHeight),y.current!==t&&c(t+y.current,e)},[e,c]),I=Object(r.useCallback)(function(){var t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)});g(yt({title:"",id:t,todoListId:e},e))},[e,g]),S=Object(r.useCallback)(function(){u(e),g(Lt(e))},[e,g,u]),T=Object(r.useState)("All"),C=Object(f.a)(T,1)[0],_=a?a.filter(function(t){return"Active"===C?0===t.status:"Completed"!==C||2===t.status}):[],$=Object(Nt.b)(function(t){var e=t.hovering;!e||b||l||g(lt(m[o])),e||b||l||g(lt(v))}),H=Object(r.useState)(!1),B=Object(f.a)(H,2),R=B[0],A=B[1],z=Object(r.useCallback)(function(t){A(t)},[]);return i.a.createElement(fe,Object.assign({},$(),{ref:E,$editable:d,$closeLookState:s,$animationInProgress:h}),i.a.createElement(he,{$editable:d,$closeLookState:s}),i.a.createElement(pe,{$palette:o,$editable:d,$isTasksHovered:O,$closeLookState:s,$focusedStatus:l},i.a.createElement(be,{$palette:o}),i.a.createElement(le,{colors:m[o],deleteTodoList:S,addTask:I,editList:z}),i.a.createElement(ue,{listTitle:n,id:e,isTitleEditable:R,deleteTodoList:S,switchTitleMode:z,palette:m[o]}),i.a.createElement(oe,{todoListId:e,tasks:_,setHeight:L,palette:m[o],setHoveredStatus:j})))},k.a),xe=Object(u.b)(b.animated.div).withConfig({displayName:"CloseButton__CloseButtonAnimatedWrapper",componentId:"tilrvq-0"})(["position:absolute;border-radius:100%;"]),we=Object(u.b)(b.animated.div).withConfig({displayName:"CloseButton",componentId:"tilrvq-1"})(["display:grid;place-items:center;width:","px;height:","px;border-radius:100%;cursor:pointer;font-size:20px;background:",";color:",";box-shadow:",";;transition:.25s cubic-bezier(0.25,0,0,1);&:hover{background:",";color:",";}"],A.isMobile?60:40,A.isMobile?60:40,function(t){return t.$palette.background},function(t){return t.$palette.color},function(t){return t.$palette.littleShadows},function(t){return t.$palette.color},function(t){return t.$palette.background}),me=i.a.memo(function(t){var e=t.closeButtonAnimation,n=t.returnFromCloseLook,r=Object(p.d)(function(t){return t.interface.currentPaletteIndex},p.b);return i.a.createElement(xe,{onClick:n,style:e},i.a.createElement(we,{$palette:r},i.a.createElement(Kt.a,{icon:"times"})))},k.a),ve=Object(u.b)(b.animated.div).withConfig({displayName:"AllListsContainer__TodoListContainer",componentId:"sc-1j24ac5-0"})(["  transform-style:preserve-3d;position:absolute;width:","px;"],function(t){return t.$width}),Oe=i.a.memo(function(t){var e=t.setWrapperAnimation,n=t.scrollByListDrugging,a=t.setCloseLookState,o=t.returnFromCloseLookState,c=t.switchScrollBar,u=Object(p.d)(function(t){return t.todoList.editable},p.b),s=Object(p.d)(function(t){return t.todoList.todoLists},k.a),d=Object(p.d)(function(t){return t.interface.width},p.b),l=Object(p.d)(function(t){return t.interface.interfaceHeight},p.b),h=Object(p.d)(function(t){return t.interface.scrollableState},p.b),g=Object(p.d)(function(t){return t.interface.focusedStatus},p.b),x=Object(p.c)(),O=Object(r.useRef)([]),j=Object(b.useSprings)(s.length,function(t){if(0===O.current.length)return{x:0,y:0,zIndex:3,opacity:1,display:"block"};var e=O.current.find(function(e){return e.index===s.length-1-t});return{x:e?e.x:0,y:e?e.y:0,opacity:1,zIndex:3,display:"block"}}),y=Object(f.a)(j,2),E=y[0],L=y[1],I=Object(r.useMemo)(function(){return d>=1700?4:d>=1100?3:d>=700?2:1},[d]),S=Object(r.useMemo)(function(){return d/I},[d,I]),C=Object(r.useCallback)(function(){var t=new Array(I).fill(0);O.current=O.current.map(function(e,n){var r=_.current.find(function(t){return e.id===t.id}),i=r?r.height:0,a=n%I,o=S*a,c=(t[a]+=i)-i,u=o+S,s=c+i,d=o+S/2,l=c+i/2;return Object(T.a)({},e,{x:o,y:c,rightX:u,botY:s,horizontalCenter:d,verticalCenter:l,height:i})}),Math.max.apply(Math,Object(P.a)(t))!==B.current&&(B.current=Math.max.apply(Math,Object(P.a)(t)),x(pt(B.current)))},[S,I,x]),_=Object(r.useRef)([]),$=Object(r.useCallback)(function(t,e){var n=_.current.findIndex(function(t){return t.id===e}),r=-1===n?[].concat(Object(P.a)(_.current),[{height:t,id:e}]):_.current.map(function(r,i){return i===n?{height:t,id:e}:r});_.current=r,r.length===s.length&&(C(),L(function(t){var e=O.current.find(function(e){return e.index===s.length-1-t});return e?{x:e.x,y:e.y}:{to:!1}}))},[s,L,C]),H=Object(r.useCallback)(function(t){_.current=_.current.filter(function(e){return e.id!==t})},[]),B=Object(r.useRef)(0);Object(r.useEffect)(function(){if(!u&&0===O.current.length){var t=new Array(I).fill(0);O.current=s.map(function(e,n){var r=_.current.find(function(t){return e.id===t.id}),i=r?r.height:0,a=n%I,o=S*a,c=(t[a]+=i)-i,u=o+S,s=c+i,d=o+S/2,l=c+i/2,f=n;return{x:o,y:c,height:i,id:e.id,botY:s,rightX:u,horizontalCenter:d,verticalCenter:l,index:f}}),B.current=Math.max.apply(Math,Object(P.a)(t)),x(pt(B.current))}if(u&&O.current.length<s.length&&(O.current=[{x:0,y:0,height:0,id:s[0].id,botY:0,rightX:0,horizontalCenter:0,verticalCenter:0,index:0}].concat(Object(P.a)(O.current)).map(function(t,e){return 0===e?t:Object(T.a)({},t,{index:t.index+1})}),C()),u&&O.current.length>s.length){var e=O.current.findIndex(function(t){return-1===s.findIndex(function(e){return e.id===t.id})}),n=O.current[e];O.current=O.current.map(function(t){var e=t.index>n.index?t.index-1:t.index;return Object(T.a)({},t,{index:e})}).filter(function(t,n){return n!==e}),C()}O.current.length===s.length&&C(),L(function(t){var e=O.current.find(function(e){return e.index===s.length-1-t});return{x:e.x,y:e.y}})},[s,I,S,x,u,C,L]),Object(r.useEffect)(function(){C(),L(function(t){var e=O.current.find(function(e){return e.index===s.length-1-t});return{x:e.x,y:e.y}})},[d,I,S,C,s.length,L]);var R=Object(r.useCallback)(function(t,e){var n,r,i,a=new Array(I).fill(0);O.current=(n=O.current,r=t,i=e,n.map(function(t,e){return e===r?n[i]:e===i?n[r]:t})).map(function(t,e){var n=e%I,r=S*n,i=(a[n]+=t.height)-t.height,o=r+S,c=i+t.height,u=r+S/2,s=i+t.height/2;return Object(T.a)({},t,{x:r,y:i,rightX:o,botY:c,horizontalCenter:u,verticalCenter:s})}),Math.max.apply(Math,Object(P.a)(a))!==B.current&&(B.current=Math.max.apply(Math,Object(P.a)(a)),x(pt(B.current)))},[S,I,x]),z=Object(r.useCallback)(function(t,e){var n=D.current.horizontalCenter+t,r=D.current.verticalCenter+e,i=D.current.height/2,a=O.current.findIndex(function(t){return t.x<n&&t.rightX>n&&t.verticalCenter+i>r&&t.verticalCenter-i<r});return a<s.length&&a>=0?a:null},[s]),N=Object(r.useCallback)(function(t,e,n){L(function(r){if(r===n)return{x:D.current.x+t,y:D.current.y+e,zIndex:4,config:{tension:200,clamp:!0},immediate:function(t){return"zIndex"===t}};var i=O.current.find(function(t){return t.index===s.length-1-r});return{x:i.x,y:i.y}})},[s,L]),D=Object(r.useRef)(null),M=Object(r.useRef)({left:0,right:0,top:0,bottom:0,pageTop:0,pageBottom:0}),W=Object(r.useRef)(null),X=Object(r.useRef)(0),F=Object(r.useRef)(0),K=Object(r.useRef)(null),Y=Object(r.useCallback)(function(){var t=-D.current.x-35+W.current.offsetX,e=d-D.current.rightX+35+(d/I-W.current.offsetX),n=35-D.current.y-W.current.offsetY+35+25,r=B.current-D.current.y-35-(W.current.offsetY+35),i=-W.current.clientY+l+35+25,a=window.innerHeight-.1*window.innerHeight+i-l-25;M.current={left:t,right:e,top:n,bottom:r,pageTop:i,pageBottom:a}},[d,I,l]),Z=Object(Nt.a)(function(t){var e=Object(f.a)(t.args,2),r=e[0],i=e[1],a=t.down,o=Object(f.a)(t.movement,2),c=o[0],u=o[1],d=t.active,l=t.first,p=t.event;if(!h||!A.isMobile){null===p||void 0===p||p.stopPropagation();var b=O.current.findIndex(function(t){return t.index===r});if(g||x(dt(!0)),l&&(D.current=O.current[b],W.current={offsetX:p.offsetX,offsetY:p.offsetY,clientX:p.clientX,clientY:p.clientY},Y(),X.current=u,F.current=0),null!==K.current&&(clearTimeout(K.current),K.current=null),d)if(u>M.current.pageBottom&&X.current<M.current.bottom){var m=function t(){var e;return w.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return e=new Promise(function(t){K.current=window.setTimeout(function(){n("bottom"),X.current=X.current+8,F.current=F.current+8;var e=z(c,X.current);null!==e&&e!==b&&R(b,e),N(c,X.current,i),t()},10)}),r.next=3,w.a.awrap(e.then(function(){X.current<M.current.bottom&&t()}));case 3:case"end":return r.stop()}})};w.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.awrap(m());case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}})}else if(u<M.current.pageTop&&X.current>M.current.top){var v=function t(){var e;return w.a.async(function(r){for(;;)switch(r.prev=r.next){case 0:return e=new Promise(function(t){K.current=window.setTimeout(function(){n("top"),X.current=X.current-8,F.current=F.current-8;var e=z(c,X.current);null!==e&&e!==b&&R(b,e),N(c,X.current,i),t()},10)}),r.next=3,w.a.awrap(e.then(function(){X.current>M.current.top&&t()}));case 3:case"end":return r.stop()}})};w.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.awrap(v());case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}})}else{X.current=u+F.current;var k=z(c,X.current);null!==k&&k!==b&&R(b,k),N(c,X.current,i)}if(!a){W.current=null,L(function(t){var e=O.current.find(function(e){return e.index===s.length-1-t});return{x:e.x,y:e.y,zIndex:3}});var j=O.current.map(function(t){return t.id});x($t(j)),x(dt(!1))}}},{filterTaps:!0}),G=Object(b.useSpring)(function(){return{x:0,y:0,opacity:0,display:"none"}}),q=Object(f.a)(G,2),U=q[0],J=q[1],Q=Object(r.useState)(null),V=Object(f.a)(Q,2),tt=V[0],et=V[1],nt=Object(r.useCallback)(function(t){var n,r,i;return w.a.async(function(o){for(;;)switch(o.prev=o.next){case 0:if(!u&&null===tt){o.next=2;break}return o.abrupt("return");case 2:return x(mt(!0)),n=O.current.find(function(e){return e.index===t}),c(!1),o.next=7,w.a.awrap(L(function(e){return e!==s.length-1-t?{to:function(t){return w.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.awrap(t({opacity:0}));case 2:return e.next=4,w.a.awrap(t({display:"none"}));case 4:case"end":return e.stop()}})}}:{to:!1}}));case 7:return x(pt(n.height)),e({x:window.innerWidth<=1210?"5vw":"15vw",rotateX:0,rotateZ:0,y:0}),a(n.height),x(lt(m[(s.length-1-t)%m.length])),et(t),r=n.height<window.innerHeight-200?window.innerHeight/2-n.height/2:100,i=d/2-d/I/2,o.next=16,w.a.awrap(L(function(e){return e!==s.length-1-t?{to:!1}:{y:r,x:i}}));case 16:J({to:function(t){var e,n;return w.a.async(function(i){for(;;)switch(i.prev=i.next){case 0:return e=A.isMobile?r-80:r-25,n=A.isMobile?d/2-30:d/2+d/I/2-10,i.next=4,w.a.awrap(t({y:e,x:n,display:"block",immediate:!0}));case 4:return i.next=6,w.a.awrap(t({opacity:1,immediate:!1}));case 6:case"end":return i.stop()}})}});case 17:case"end":return o.stop()}})},[s,a,tt,J,x,I,u,L,d,c,e]),rt=Object(r.useCallback)(function(){return w.a.async(function(t){for(;;)switch(t.prev=t.next){case 0:return c(!1),t.next=3,w.a.awrap(J({to:function(t){return w.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.awrap(t({opacity:0}));case 2:return e.next=4,w.a.awrap(t({display:"none"}));case 4:case"end":return e.stop()}})}}));case 3:return o(),x(pt(B.current)),L(function(t){if(t!==s.length-1-tt)return{to:!1};var e=O.current.find(function(t){return t.index===tt});return{x:e.x,y:e.y}}),t.next=8,w.a.awrap(e({x:window.innerWidth<=1210?"-5vw":"-15vw",rotateX:45,rotateZ:45,y:275}));case 8:c(!0),x(lt(v)),et(null),L(function(t){return t!==s.length-1-tt?{opacity:1,display:"block"}:{to:!1}}),x(mt(!1));case 13:case"end":return t.stop()}})},[s,o,tt,x,L,c,J,e]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(me,{returnFromCloseLook:rt,closeButtonAnimation:U}),0!==s.length&&s.map(function(t,e){return i.a.createElement(ve,Object.assign({style:E[s.length-e-1]},u&&Object(T.a)({},Z(e,s.length-e-1)),{onClick:function(){return nt(e)},$width:S,key:t.id}),i.a.createElement(ge,{id:t.id,paletteIndex:(s.length-1-e)%m.length,deleteList:H,setNewHeights:$,currentLook:e===tt,listTitle:t.title,listTasks:t.tasks}))}))},k.a),ke=function(){var t=Object(p.d)(function(t){return t.interface.currentPaletteIndex},p.b),e=Object(p.d)(function(t){return t.todoList.editable},p.b),n=Object(p.d)(function(t){return t.interface.height},p.b),a=Object(p.d)(function(t){return t.interface.width},p.b),o=Object(p.d)(function(t){return t.interface.initialLoadingState},p.b),c=Object(p.d)(function(t){return t.interface.closeLookState},p.b),u=Object(p.d)(function(t){return t.interface.interfaceHeight},p.b),s=Object(p.d)(function(t){return t.interface.scrollableState},p.b),d=Object(p.d)(function(t){return t.interface.animationInProgress},p.b),l=Object(p.c)();Object(r.useEffect)(function(){l(function(t){return w.a.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.awrap(q());case 2:if(e.sent.data.id){e.next=6;break}return e.next=6,w.a.awrap(U());case 6:t(Rt(!0));case 7:case"end":return e.stop()}})});var t=!0,e=void 0,n=function(){t&&(clearTimeout(e),e=window.setTimeout(function(){return l(bt(B.current.offsetWidth))},150))};return window.addEventListener("resize",n),function(){t=!1,window.removeEventListener("resize",n)}},[l]);var h=Object(r.useState)({border:0,scrollBarHeight:0}),g=Object(f.a)(h,2),x=g[0],m=x.border,v=x.scrollBarHeight,O=g[1],k=Object(r.useState)(!1),j=Object(f.a)(k,2),y=j[0],E=j[1],L=Object(r.useState)(!1),I=Object(f.a)(L,2),S=I[0],T=I[1],C=Object(r.useState)(!1),_=Object(f.a)(C,2),$=_[0],H=_[1],B=Object(r.useRef)(null);Object(r.useLayoutEffect)(function(){l(bt(B.current.offsetWidth))},[l]);var R=Object(b.useSpring)(function(){return{x:"-100vw",rotateX:45,rotateZ:45,y:275,config:{tension:90,clamp:!0}}}),z=Object(f.a)(R,2),N=z[0],D=z[1];Object(r.useEffect)(function(){o||D({x:window.innerWidth<=1210?"-5vw":"-15vw"})},[o,D]);var M=Object(r.useRef)(0),W=Object(r.useRef)(0),P=Object(r.useRef)(window.innerWidth<=1210?-window.innerHeight/2:0),X=Object(r.useRef)([]),F=Object(b.useSpring)(function(){return{y:-P.current,top:"0%",height:0,immediate:!1}}),K=Object(f.a)(F,2),Y=K[0],Z=K[1];Object(r.useEffect)(function(){var t,r=n?(window.innerHeight-(e?u:0))/n*100:0;c?window.innerWidth>1210&&!c?(t=e?n-window.innerHeight+u<0?0:n-window.innerHeight+u:n-window.innerHeight<0?.5*n:n-window.innerHeight/2,O({border:t,scrollBarHeight:r})):t=m:(t=e?n-window.innerHeight+u<0?0:n-window.innerHeight+u:n,O({border:t,scrollBarHeight:r})),P.current=e||c?0:window.innerWidth<=1210?-window.innerHeight/2:0,d||(M.current>t?(W.current=100-v,Z({height:n,y:-t-P.current,top:"".concat(W.current,"%")})):(W.current=M.current/t*(100-v),Z({height:n,y:-M.current-P.current,top:"".concat(W.current,"%")}))),o||d||D({x:e||c?window.innerWidth<=1210?"5vw":"15vw":window.innerWidth<=1210?"-5vw":"-15vw",rotateX:e||c?0:45,rotateZ:e||c?0:45,y:e||c?0:275}),n<window.innerHeight-u?T(!1):d||T(!0)},[n,a,e,Z,D,c,u,o,d,m,v]),Object(Nt.c)(function(t){var e=Object(f.a)(t.delta,2)[1];S&&(M.current=M.current+e<m&&M.current+e>0?M.current+e:M.current+e<=0?0:m,W.current=M.current/m*(100-v),Z({y:-M.current-P.current,top:"".concat(W.current,"%")}))},{domTarget:window}),Object(Nt.a)(function(t){var e=Object(f.a)(t.delta,2)[1],n=t.active,r=Object(f.a)(t.swipe,2)[1];if(A.isMobile&&e<0&&null===document.fullscreenElement&&document.documentElement.requestFullscreen(),S&&(A.isMobile||s)){if(0!==r){var i=(window.innerHeight-u)*r;M.current=M.current-i<m&&M.current-i>0?M.current-i:M.current-i<=0?0:m}if(n){var a=-e;M.current=M.current+a<m&&M.current+a>0?M.current+a:M.current+a<=0?0:m}W.current=M.current/m*(100-v),Z({y:-M.current-P.current,top:"".concat(W.current,"%")})}},{domTarget:window,filterTaps:!0,eventOptions:{passive:!1}});var G=Object(Nt.a)(function(t){var n=Object(f.a)(t.delta,2)[1],r=t.event,i=t.first,a=t.down;null===r||void 0===r||r.stopPropagation(),i&&E(!0);var o=n/(e?window.innerHeight-u:window.innerHeight)*100;W.current=W.current+o>0&&W.current+o<100-v?W.current+o:W.current+o<=0?0:100-v,M.current=m*W.current/(100-v),Z({y:-M.current-P.current,top:"".concat(W.current,"%"),immediate:function(t){return"top"===t}}),a||E(!1)}),J=Object(r.useCallback)(function(t){"bottom"===t&&M.current<m&&(M.current=M.current+5<m?M.current+5:m,W.current=M.current/m*(100-v),Z({y:-M.current,top:"".concat(W.current,"%")})),"top"===t&&M.current>0&&(M.current=M.current-5>0?M.current-5:0,W.current=M.current/m*(100-v),Z({y:-M.current,top:"".concat(W.current,"%")}))},[m,v,Z]),Q=Object(r.useCallback)(function(t){var e=t>window.innerHeight-200?t-(window.innerHeight-200):0;if(e>0){X.current=[M.current,W.current,m,v];var n=(window.innerHeight-200)/t*100;O({border:e,scrollBarHeight:n}),M.current=0,W.current=0,Z({y:0,top:"".concat(0,"%")}),T(!0)}0===e&&(X.current=[M.current,W.current,m,v],O({border:0,scrollBarHeight:0}),M.current=0,W.current=0,Z({y:0,top:"".concat(0,"%")})),H(!0)},[m,v,Z]),V=Object(r.useCallback)(function(){0!==X.current.length&&(M.current=X.current[0],W.current=X.current[1],O({border:X.current[2],scrollBarHeight:X.current[3]}),P.current=window.innerWidth<=1210?-window.innerHeight/2:0,Z({y:-X.current[0]-P.current,top:"".concat(X.current[1],"%")})),H(!1)},[Z]),tt=Object(r.useCallback)(function(t){return T(t)},[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(Ft,{height:Y.height,visible:S,closeLook:$,editable:e,y:Y.y,interfaceHeight:u,measuredRef:B,wrapperAnimation:N},i.a.createElement(Oe,{setWrapperAnimation:D,scrollByListDrugging:J,setCloseLookState:Q,returnFromCloseLookState:V,switchScrollBar:tt})),i.a.createElement(Wt,{palette:t,visible:S,editable:e,interfaceHeight:u,drugged:y,top:Y.top,bindDraggedScrollBar:G,scrollBarHeight:v}))};function je(){var t=Object(c.a)(["\n  * {\n      box-sizing: border-box;\n      -webkit-font-smoothing: antialiased;\n      -moz-osx-font-smoothing: grayscale;\n      touch-action: none;\n    };\n  body {\n    background-color: white;\n    margin: 0;\n    padding: 0;\n    user-select: none;\n    outline: none;\n    &::-webkit-scrollbar { \n      display: none;\n    };\n  };\n  html {\n    -ms-overflow-style: none; \n  }\n"]);return je=function(){return t},t}s.b.add(d.a,l.a);var ye=Object(u.a)(je()),Ee=u.b.div.withConfig({displayName:"App__Wrapper",componentId:"sc-3kl7j0-0"})(["position:fixed;height:100vh;width:100vw;overflow:hidden;"]),Le=function(){return Object(r.useEffect)(function(){var t=function(){return document.location.reload()};return window.addEventListener("orientationchange",t),function(){return window.removeEventListener("orientationchange",t)}},[]),i.a.createElement(i.a.Fragment,null,i.a.createElement(ye,null),i.a.createElement(g,null),i.a.createElement(Ee,null,i.a.createElement(zt,null),i.a.createElement(ke,null)))},Ie=n(32),Se=n(75),Te=n(76),Ce=Object(Ie.combineReducers)({todoList:At,interface:Ot}),_e=Object(Ie.createStore)(Ce,Object(Te.composeWithDevTools)(Object(Ie.applyMiddleware)(Se.a))),$e=document.getElementById("root");o.a.unstable_createRoot($e).render(i.a.createElement(p.a,{store:_e},i.a.createElement(Le,null)))},48:function(t,e,n){},81:function(t,e,n){t.exports=n(114)}},[[81,1,2]]]);
//# sourceMappingURL=main.17fc9ad6.chunk.js.map